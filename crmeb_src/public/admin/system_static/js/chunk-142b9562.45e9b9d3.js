(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-142b9562"],{2398:function(i,t){i.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIzSURBVGiB7dkvbBRBFIDxihMVJ05UVCARFYgKBKKiEoFoQgWyElFRgUA2gQQBogmWpAgcJBgc8kgqEBUVFRUVFScqECcqTvwQu5te2D8zd927WZJ+enffN7Mzb9+bXVm5556ZwfPUDnOBAb7KeJLaZyawjSu3fEztFAV6eKPMNVZT+zWCNfyskIcJNlI71oJNXNbIw8vUjrVgDzcN8gepHWvBYYN4d+Vlm/U4IH+Y2rMS9NVv1oJPqT0ryeWHAfkf6KV2LYF1nAXkf6Of2rVELn8ekB9hPbVriUj5GzxO7VoiX/OnAXnYS+1aQtyGhQ+pXUvI8vz3CPmhjmac4wj5azxI7VoCryPk4WmbQR+18SrxTFb6hjhqw7sIuoWxbM3O/RHJJ2EcIX/axmQVQTf+CTrEYI7nDDTX8wUTbLYpP6oIcm7GL6K4jAOvFi1fcCWyhcN+pPyJFpfOjvBmG2Er8JxNzd1UwRgPW5GfCh4zc2M16Q6rwjVOwX6r8lMSMTl7gt2Ke99Hyp8sRH5K5ChS5GDqnu3Ie5ZzHILPkULvZEXaZeT1hwuXzwfQw7dIqYvI684t8zQtH8SvSLkYGjPYogbRl+Xru5LuVEFcC9jEH6wlG8DUIK4ConUsJufPinC5UcWZLnVYslIhpkQuWP7GDeG2XwjxJbVrLdjVXPzd6GJ/Ow1eNAzgbWq/KHBQIT8yRxeXDOWfEt39/VOH2wr2QpfS5izIir+d1B5z89/O/D134C+N9zTDbeyE4AAAAABJRU5ErkJggg=="},"3fa5":function(i,t,e){},"9ca88":function(i,t,e){e("3fa5")},b680:function(i,t,e){function n(i,t,e){return 0===t?e:t%2==1?n(i,t-1,e*i):n(i*i,t/2,e)}function a(i,t,e){for(var n=-1,a=e;++n<6;)a+=t*i[n],i[n]=a%1e7,a=m(a/1e7)}function r(i,t){for(var e=6,n=0;0<=--e;)n+=i[e],i[e]=m(n/t),n=n%t*1e7}function s(i){for(var t,e=6,n="";0<=--e;)""===n&&0!==e&&0===i[e]||(t=g(i[e]),n=""===n?t:n+p("0",7-t.length)+t);return n}var c=e("23e7"),l=e("e330"),o=e("5926"),u=e("408a"),d=e("1148"),f=(e=e("d039"),RangeError),g=String,m=Math.floor,p=l(d),v=l("".slice),h=l(1.1.toFixed);c({target:"Number",proto:!0,forced:e((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!e((function(){h({})}))},{toFixed:function(i){var t,e,c=u(this),l=(i=o(i),[0,0,0,0,0,0]),d="",m="0";if(i<0||20<i)throw new f("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||1e21<=c)return g(c);if(c<0&&(d="-",c=-c),1e-21<c)if(c=(t=(i=>{for(var t=0,e=i;4096<=e;)t+=12,e/=4096;for(;2<=e;)t+=1,e/=2;return t})(c*n(2,69,1))-69)<0?c*n(2,-t,1):c/n(2,t,1),c*=4503599627370496,0<(t=52-t)){for(a(l,0,c),e=i;7<=e;)a(l,1e7,0),e-=7;for(a(l,n(10,e,1),0),e=t-1;23<=e;)r(l,1<<23),e-=23;r(l,1<<e),a(l,1,1),r(l,2),m=s(l)}else a(l,0,c),a(l,1<<-t,0),m=s(l)+p("0",i);return 0<i?d+((c=m.length)<=i?"0."+p("0",i-c)+m:v(m,0,c-i)+"."+v(m,c-i)):d+m}})},e90e:function(i,t,e){e.r(t),e("b680");var n=[function(){var i=this._self._c;return i("div",{staticClass:"success"},[i("img",{staticClass:"image",attrs:{src:e("2398"),alt:""}})])}],a=e("c14f"),r=e("1da1"),s=(e("c740"),e("d81d"),e("a434"),e("e9f5"),e("ab43"),e("d3b7"),e("d708")),c=e("90e7"),l=e("a006"),o=e("ed08"),u={name:"app_upload_file",data:function(){return{fileUrl:s.a.apiBaseURL+"/image/scan_upload",imgList:[],allSize:0,token:"",uploading:!0,limit:20,loading:!1,pid:0}},created:function(){this.token=this.$route.query.token,this.pid=this.$route.query.pid,document.title="手机端扫码上传"},methods:{selectImgs:function(){this.loading||this.$refs.upload.$refs["upload-inner"].handleClick()},again:function(){this.uploading=!0,this.imgList=[],this.allSize=0},submitUpload:function(){var i=this;return Object(r.a)(Object(a.a)().m((function t(){var e,n;return Object(a.a)().w((function(t){for(;;)switch(t.n){case 0:if(i.imgList.length){if(i.loading)return t.a(2);t.n=1}else t.n=6;break;case 1:i.loading=!0,e=0;case 2:if(e<i.imgList.length)return n=i.imgList[e].raw,t.n=3,i.uploadItem(n);t.n=5;break;case 3:e==i.imgList.length-1&&(i.uploading=!1,i.loading=!1);case 4:e++,t.n=2;break;case 5:t.n=7;break;case 6:i.$message.warning("请先选择图片");case 7:return t.a(2)}}),t)})))()},handleRemove:function(i){var t=this,e=this.imgList.findIndex((function(t){return t.url==i.url}));this.imgList.splice(e,1),this.$nextTick((function(i){var e=0;t.imgList.length?(t.imgList.map((function(i){e+=i.raw.size})),t.allSize=e):t.allSize=0}))},uploadItem:function(i){var t=this;return new Promise((function(e,n){var a=new FormData;a.append("file",i),a.append("uploadToken",t.token),a.append("pid",t.pid),Object(c.rb)(a).then((function(i){200==i.status?e():(t.loading=!1,t.$message({message:"上传失败",type:"error",duration:1e3}))})).catch((function(i){t.loading=!1,t.$message.error(i.msg)}))}))},fileError:function(i,t,e){},beforeUpload:function(i){return Object(o.c)(i)},fileChange:function(i,t){var e=this;return Object(r.a)(Object(a.a)().m((function n(){var r;return Object(a.a)().w((function(n){for(;;)switch(n.n){case 0:if(2097152<=i.size)return n.n=1,e.comImg(i.raw).then((function(n){t.map((function(t){t.uid===i.uid&&(e.allSize+=n.size,t.raw=n)})),e.imgList=t}));n.n=2;break;case 1:n.n=3;break;case 2:e.imgList=t,r=0,e.imgList.length?(e.imgList.map((function(i){r+=i.raw.size})),e.allSize=r):e.allSize=0;case 3:return n.a(2)}}),n)})))()},comImg:function(i){return new Promise((function(t,e){Object(l.a)(i).then((function(i){t(i)}))}))},loadData:function(i,t){getCategoryListApi({pid:i.value}).then((()=>{var i=Object(r.a)(Object(a.a)().m((function i(e){var n;return Object(a.a)().w((function(i){for(;;)switch(i.n){case 0:n=e.data.list,t(n);case 1:return i.a(2)}}),i)})));return function(t){return i.apply(this,arguments)}})()).catch((function(i){}))}}},d=(e("9ca88"),e("2877"));d=Object(d.a)(u,(function(){var i=this,t=i._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"main"},[i.uploading?t("div",[t("div",{staticClass:"img-list",class:{"none-card":i.imgList.length}},[t("el-upload",{ref:"upload",attrs:{action:i.fileUrl,"list-type":"picture-card","on-change":i.fileChange,"on-error":i.fileError,"before-upload":i.beforeUpload,"file-list":i.imgList,"auto-upload":!1,multiple:!0,limit:i.limit,accept:"image/*"},scopedSlots:i._u([{key:"file",fn:function(e){var n=e.file;return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),t("i",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"el-icon-error btndel",on:{click:function(t){return i.handleRemove(n)}}})])}}],null,!1,3691276614)},[i.imgList.length?i._e():t("div",{staticClass:"upload-card",attrs:{slot:"default"},slot:"default"},[t("i",{staticClass:"el-icon-plus"}),t("p",{staticClass:"text"},[i._v("点击选择图片")])])])],1),t("div",{staticClass:"footer"},[i.imgList.length?t("div",[i._v("共"+i._s(i.imgList.length)+"/"+i._s(i.limit)+"张，"+i._s((i.allSize/1e6).toFixed(2))+" M")]):t("div"),t("div",{staticClass:"upload-btn"},[i.imgList.length<i.limit?t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"btn",on:{click:i.selectImgs}},[i._v("\n          "+i._s(i.imgList.length?"继续选择":"选择图片")+"\n        ")]):i._e(),t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"btn upload",class:{"no-pic":!i.imgList.length},on:{click:i.submitUpload}},[i._v("确认上传")])])])]):t("div",{staticClass:"upload-success"},[i._m(0),t("div",{staticClass:"text"},[i._v("图片上传成功")]),t("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"again",on:{click:i.again}},[i._v("继续上传")])])])}),n,!1,null,"0fc79efa",null);t.default=d.exports}}]);