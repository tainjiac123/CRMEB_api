(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-593a013a"],{"00fd":function(t,e,a){a=a("9e69");var i=Object.prototype,n=i.hasOwnProperty,o=i.toString,r=a?a.toStringTag:void 0;t.exports=function(t){var e=n.call(t,r),a=t[r];try{var i=!(t[r]=void 0)}catch(t){}var l=o.call(t);return i&&(e?t[r]=a:delete t[r]),l}},"0d3e":function(t,e,a){function i(t){return t=t.replace(/<img[^>]*>/gi,(function(t,e){return(t=(t=t.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,"")).replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,"")).replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,"")})),(t=t.replace(/style="[^"]+"/gi,(function(t,e){return t.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;")}))).replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;"')}a.d(e,"a",(function(){return i})),a("ac1f"),a("5319")},"0f32":function(t,e,a){var i=a("b047"),n=a("1a8c");t.exports=function(t,e,a){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n(a)&&(o="leading"in a?!!a.leading:o,r="trailing"in a?!!a.trailing:r),i(t,e,{leading:o,maxWait:e,trailing:r})}},"0fe5":function(t,e,a){},1310:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},"1a8c":function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},"29f3":function(t,e){var a=Object.prototype.toString;t.exports=function(t){return a.call(t)}},"2b3e":function(t,e,a){a=a("585a");var i="object"==typeof self&&self&&self.Object===Object&&self;a=a||i||Function("return this")();t.exports=a},"34e1":function(t,e,a){var i=a("c65b"),n=a("825a"),o=a("46c4"),r=a("35a1");t.exports=function(t,e){return e&&"string"==typeof t||n(t),e=r(t),o(n(void 0!==e?i(e,t):t))}},3729:function(t,e,a){var i=a("9e69"),n=a("00fd"),o=a("29f3"),r=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(r&&r in Object(t)?n:o)(t)}},"3c9b":function(t,e,a){a("9558")},"3e5c":function(t,e,a){},"408c":function(t,e,a){var i=a("2b3e");t.exports=function(){return i.Date.now()}},"42ca":function(t,e,a){a("3e5c")},"4ca6":function(t,e,a){a("e8cd")},"4cef":function(t,e){var a=/\s/;t.exports=function(t){for(var e=t.length;e--&&a.test(t.charAt(e)););return e}},5285:function(t,e,a){a("5b9b")},"585a":function(t,e,a){(function(e){e="object"==typeof e&&e&&e.Object===Object&&e,t.exports=e}).call(this,a("c8ba"))},"5b9b":function(t,e,a){},"5db7":function(t,e,a){var i=a("23e7"),n=a("a2bf"),o=a("59ed"),r=a("7b0b"),l=a("07fa"),s=a("65f0");i({target:"Array",proto:!0},{flatMap:function(t){var e,a=r(this),i=l(a);return o(t),(e=s(a,0)).length=n(e,a,a,i,0,1,t,1<arguments.length?arguments[1]:void 0),e}})},6243:function(t,e,a){},6320:function(t,e,a){a("6243")},"6fd3":function(t,e,a){a("498a"),a("14d9"),a("13d5"),a("a434"),a("e9f5"),a("9485"),a("d3b7");var i=a("c4c8"),n=a("b76a");n={name:"addAttr",components:{draggable:a.n(n).a},data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:"请输入规格名称",trigger:"blur"}]},formDynamic:{rule_name:"",spec:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},computed:{},methods:{handleShowPop:function(t){this.$refs["inputRef_"+t][0].focus()},handleRemoveRole:function(t){this.formDynamic.spec.splice(t,1),this.formDynamic.spec.length||(this.formDynamic.spec=[])},handleAddRole:function(){var t={value:this.formDynamic.attrsName,detail:[]};this.formDynamic.spec.push(t)},onCancel:function(){this.ids=0,this.clear()},onClose:function(){this.ids=0,this.clear(),this.modal=!1},addBtn:function(){this.isBtn=!0},getIofo:function(t){var e=this;this.spinShow=!0,this.ids=t.id,Object(i.T)(t.id).then((function(t){e.formDynamic=t.data.info,e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$message.error(t.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&(0===e.formDynamic.spec.length?e.$message.warning("请至少添加一条商品规格！"):(e.modal_loading=!0,void setTimeout((function(){Object(i.S)(e.formDynamic,e.ids).then((function(t){e.$message.success(t.msg),setTimeout((function(){e.modal=!1,e.modal_loading=!1}),500),setTimeout((function(){e.$emit("getList"),e.clear()}),600)})).catch((function(t){e.modal_loading=!1,e.$message.error(t.msg)}))}),1200)))}))},clear:function(){this.$refs.formDynamic.resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.attrsName="",this.attrsVal="",this.ids=0},offAttrName:function(){this.isBtn=!1},handleRemove:function(t){this.formDynamic.spec.splice(t,1)},handleRemove2:function(t,e){t.splice(e,1)},createAttrName:function(){var t,e;this.attrsName&&this.attrsVal?(t={value:this.attrsName,detail:[this.attrsVal]},this.formDynamic.spec.push(t),e={},this.formDynamic.spec=this.formDynamic.spec.reduce((function(t,a){return e[a.value]||(e[a.value]=t.push(a)),t}),[]),this.attrsName="",this.attrsVal="",this.isBtn=!1):this.$message.warning("请添加规格名称或规格值")},createAttr:function(t,e){var a;t?(this.formDynamic.spec[e].detail.push(t),a={},this.formDynamic.spec[e].detail=this.formDynamic.spec[e].detail.reduce((function(t,e){return a[e]||(a[e]=t.push(e)),t}),[])):this.$message.warning("请添加属性")}}},a("7763"),a=a("2877"),a=Object(a.a)(n,(function(){var t=this,e=t._self._c;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.spinShow,expression:"spinShow"}],attrs:{visible:t.modal,title:"商品规格",width:"1000px"},on:{"update:visible":function(e){t.modal=e},closed:t.onCancel}},[e("el-form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:t.formDynamic,rules:t.rules,"label-width":"120px","label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"规格模板名称：",prop:"rule_name"}},[e("el-input",{attrs:{placeholder:"请输入标题名称",maxlength:20},model:{value:t.formDynamic.rule_name,callback:function(e){t.$set(t.formDynamic,"rule_name","string"==typeof e?e.trim():e)},expression:"formDynamic.rule_name"}})],1)],1)],1),e("el-col",{key:t.index,staticClass:"noForm",attrs:{span:23}},[e("el-form-item",{attrs:{label:""}},[e("div",{staticClass:"specifications"},[e("draggable",{attrs:{group:"specifications",list:t.formDynamic.spec,handle:".move-icon",animation:"300"}},t._l(t.formDynamic.spec,(function(a,i){return e("div",{key:i,staticClass:"specifications-item active"},[e("div",{staticClass:"move-icon"},[e("span",{staticClass:"iconfont icondrag2"})]),e("i",{staticClass:"del el-icon-error",on:{click:function(e){return t.handleRemoveRole(i)}}}),e("div",{staticClass:"specifications-item-box"},[e("div",{staticClass:"lineBox"}),e("div",{staticClass:"specifications-item-name mb18"},[e("el-input",{staticClass:"specifications-item-name-input",attrs:{placeholder:"规格名称",maxlength:"30","show-word-limit":""},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"item.value"}})],1),e("div",{staticClass:"rulesBox ml30"},[e("draggable",{staticClass:"item",attrs:{list:a.detail,handle:".drag"}},[t._l(a.detail,(function(i,n){return e("div",{key:n,staticClass:"mr10 spec drag"},[e("i",{staticClass:"el-icon-error",on:{click:function(e){return t.handleRemove2(a.detail,n)}}}),e("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"规格值",maxlength:"30"},model:{value:a.detail[n],callback:function(e){t.$set(a.detail,n,e)},expression:"item.detail[indexn]"}},[e("template",{slot:"prefix"},[e("span",{staticClass:"iconfont icondrag2"})])],2)],1)})),e("el-popover",{ref:"popoverRef_"+i,refInFor:!0,attrs:{placement:"",width:"210",trigger:"click"},on:{"after-enter":function(e){return t.handleShowPop(i)}}},[e("el-input",{ref:"inputRef_"+i,refInFor:!0,attrs:{placeholder:"请输入规格值",maxlength:"30","show-word-limit":""},on:{blur:function(e){return t.createAttr(a.detail.attrsVal,i)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createAttr(a.detail.attrsVal,i)}},model:{value:a.detail.attrsVal,callback:function(e){t.$set(a.detail,"attrsVal",e)},expression:"item.detail.attrsVal"}}),e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("添加规格值")])],1)],2)],1)])])})),0),t.formDynamic.spec.length<4?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.handleAddRole()}}},[t._v("添加新规格")]):t._e()],1)])],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.onClose}},[t._v("取消")]),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formDynamic")}}},[t._v("确定")])],1)],1)}),[],!1,null,"70cb5be4",null);e.a=a.exports},"73d9":function(t,e,a){a("44d2")("flatMap")},7763:function(t,e,a){a("a165")},"796d":function(t,e,a){var i=a("23e7"),n=a("c65b"),o=a("59ed"),r=a("825a"),l=a("46c4"),s=a("34e1"),c=a("c5cc"),d=a("2a62"),m=a("c430"),u=a("2baa"),p=(a=a("f99f"),u=!m&&!u("flatMap",(function(){})),!m&&!u&&a("flatMap",TypeError)),f=(a=m||u||p,c((function(){for(var t,e,a=this.iterator,i=this.mapper;;){if(e=this.inner)try{if(!(t=r(n(e.next,e.iterator))).done)return t.value;this.inner=null}catch(t){d(a,"throw",t)}if(t=r(n(this.next,a)),this.done=!!t.done)return;try{this.inner=s(i(t.value,this.counter++),!1)}catch(t){d(a,"throw",t)}}})));i({target:"Iterator",proto:!0,real:!0,forced:a},{flatMap:function(t){r(this);try{o(t)}catch(t){d(this,"throw",t)}return p?n(p,this,t):new f(l(this),{mapper:t,inner:null})}})},"7f7a":function(t,e,a){a("c20d")},"89e7":function(t,e,a){},"8d74":function(t,e,a){var i=a("4cef"),n=/^\s+/;t.exports=function(t){return t&&t.slice(0,i(t)+1).replace(n,"")}},9558:function(t,e,a){},"9e69":function(t,e,a){a=a("2b3e").Symbol,t.exports=a},a123:function(t,e,a){a("0fe5")},a165:function(t,e,a){},a2bf:function(t,e,a){function i(t,e,a,s,c,d,m,u){for(var p,f,h=c,v=0,b=!!m&&l(m,u);v<s;)v in a&&(p=b?b(a[v],v,e):a[v],0<d&&n(p)?(f=o(p),h=i(t,e,p,f,h,d-1)-1):(r(h+1),t[h]=p),h++),v++;return h}var n=a("e8b5"),o=a("07fa"),r=a("3511"),l=a("0366");t.exports=i},b047:function(t,e,a){var i=a("1a8c"),n=a("408c"),o=a("b4b0"),r=Math.max,l=Math.min;t.exports=function(t,e,a){var s,c,d,m,u,p,f=0,h=!1,v=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var a=s,i=c;return s=c=void 0,f=e,m=t.apply(i,a)}function _(t){var a=t-p;return void 0===p||e<=a||a<0||v&&d<=t-f}function y(){var t,a=n();if(_(a))return V(a);u=setTimeout(y,(t=e-((a=a)-p),v?l(t,d-(a-f)):t))}function V(t){return u=void 0,b&&s?g(t):(s=c=void 0,m)}function k(){var t=n(),a=_(t);if(s=arguments,c=this,p=t,a){if(void 0===u)return f=t=p,u=setTimeout(y,e),h?g(t):m;if(v)return clearTimeout(u),u=setTimeout(y,e),g(p)}return void 0===u&&(u=setTimeout(y,e)),m}return e=o(e)||0,i(a)&&(h=!!a.leading,v="maxWait"in a,d=v?r(o(a.maxWait)||0,e):d,b="trailing"in a?!!a.trailing:b),k.cancel=function(){void 0!==u&&clearTimeout(u),s=p=c=u=void(f=0)},k.flush=function(){return void 0===u?m:V(n())},k}},b0b1:function(t,e,a){a("89e7")},b4b0:function(t,e,a){var i=a("8d74"),n=a("1a8c"),o=a("ffd6"),r=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=n(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=i(t);var e=l.test(t);return e||s.test(t)?c(t.slice(2),e?2:8):r.test(t)?NaN:+t}},be29:function(t,e,a){a("fea3")},c20d:function(t,e,a){},c7cd:function(t,e,a){var i=a("23e7"),n=a("857a");i({target:"String",proto:!0,forced:a("af03")("fixed")},{fixed:function(){return n(this,"tt","","")}})},c7e8:function(t,e,a){a.r(e),a("b0c0"),a("498a");var i=a("db90"),n=a("06c5");function o(t){return(t=>{if(Array.isArray(t))return t})(t)||Object(i.a)(t)||Object(n.a)(t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}var r=a("ade3");function l(t,e){var a,i,o,r,l="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(l)return o=!(i=!0),{s:function(){l=l.call(t)},n:function(){var t=l.next();return i=t.done,t},e:function(t){o=!0,a=t},f:function(){try{i||null==l.return||l.return()}finally{if(o)throw a}}};if(Array.isArray(t)||(l=Object(n.a)(t))||e&&t&&"number"==typeof t.length)return l&&(t=l),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=a("2909"),c=a("c14f"),d=a("1da1"),m=a("5530"),u=(a("a4d3"),a("e01a"),a("99af"),a("4de4"),a("7db0"),a("c740"),a("5db7"),a("a630"),a("caad"),a("d81d"),a("14d9"),a("fb6a"),a("a434"),a("73d9"),a("e9f5"),a("910d"),a("f665"),a("796d"),a("7d54"),a("ab43"),a("a732"),a("e9c4"),a("4ec9"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("25f0"),a("6062"),a("1e70"),a("79a4"),a("c1a1"),a("8b00"),a("a4e7"),a("1e5a"),a("72c3"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("0f0e")),p=a("c4c8"),f=a("b76a"),h=(f=a.n(f),{name:"userLabel",components:{vuedraggable:f.a},props:{activeId:{type:Array,default:function(){}},listData:{type:Array,default:function(){}}},data:function(){return{labelList:[]}},watch:{activeId:{handler:function(t,e){var a=this;t!=e&&t.length&&(this.labelList=[],this.listData.map((function(e){t.includes(e.id)&&a.labelList.push(e)})))},deep:!0,immediate:!0}},mounted:function(){},methods:{onMoveSpec:function(t){var e=this;return Object(d.a)(Object(c.a)().m((function a(){var i,n,o,r;return Object(c.a)().w((function(a){for(;;)switch(a.n){case 0:i=t.newIndex,n=t.oldIndex,o=e.activeId[n],(r=Object(s.a)(e.activeId)).splice(n,1),r.splice(i,0,o),e.$emit("update:activeId",r);case 1:return a.a(2)}}),a)})))()}}}),v=(a("b0b1"),a("2877")),b=(h=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"list"},[e("vuedraggable",{staticClass:"flex",attrs:{group:"label",disabled:t.labelList.length<2,list:t.labelList,handle:".label",animation:"300"},on:{end:t.onMoveSpec}},t._l(t.labelList,(function(a,i){return e("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{list:t.activeId},expression:"{\n        list: activeId,\n      }"}],key:i,staticClass:"label"},[a.image?e("img",{staticClass:"img-tag",attrs:{src:a.image}}):e("div",{staticClass:"label-item",style:{backgroundColor:a.bg_color,color:a.font_color,border:a.border_color?"1px solid "+a.border_color:"none"}},[t._v("\n        "+t._s(a.name)+"\n      ")])])})),0)],1)}),[],!1,null,"72917656",null).exports,a("bda4")),g=a("2f62"),_=a("b0e7"),y=a("5334"),V=a("e449"),k=a("6fd3"),x=a("c4ad"),w=(a("ac1f"),a("00b4"),{name:"taoBao",data:function(){return{soure_link:"",spinShow:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:12,lg:12,md:12,sm:24,xs:24},copyConfig:{copy_type:2,copy_num:0},artFrom:{type:"taobao",url:""}}},computed:{},created:function(){},mounted:function(){this.getCopyConfig()},methods:{mealPay:function(){this.$router.push({path:this.$routeProStr+"/setting/sms/sms_config/index"})},getCopyConfig:function(){var t=this;Object(p.g)().then((function(e){t.copyConfig.copy_type=e.data.copy_type,t.copyConfig.copy_num=e.data.copy_num}))},add:function(){var t=this;if(this.soure_link){if(!/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(this.soure_link))return this.$message.warning("请输入以http开头的地址！");this.spinShow=!0,this.artFrom.url=this.soure_link,Object(p.h)(this.artFrom).then((function(e){e=e.data.productInfo,t.$emit("on-close",e),t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$message.error(e.msg)}))}else this.$message.warning("请输入链接地址！")}}}),C=(w=(a("3c9b"),Object(v.a)(w,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.spinShow,expression:"spinShow"}],staticClass:"Box"},[e("div",[e("div",{staticClass:"tips"},[t._v("\n      生成的商品默认是没有上架的，请手动上架商品！\n      "),2==t.copyConfig.copy_type?e("a",{attrs:{href:"https://doc.crmeb.com/single/v5/7785",target:"_blank"}},[t._v("如何配置密钥")]):e("span",[t._v("您当前剩余"+t._s(t.copyConfig.copy_num)+"条采集次数，"),e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"add",on:{click:function(e){return t.mealPay()}}},[t._v("增加采集次数")])])]),e("div",[t._v("商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置")])]),e("el-form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{"label-width":"80px","label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"链接地址："}},[e("el-input",{staticClass:"numPut",attrs:{clearable:"",placeholder:"请输入链接地址"},model:{value:t.soure_link,callback:function(e){t.soure_link=e},expression:"soure_link"}}),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"ml15",attrs:{type:"primary"},on:{click:t.add}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"4108d8b5",null).exports),a("c24f")),$=a("d708"),F=a("c276"),S=a("0e5c"),T=a("ed08"),B=a("5d2d"),O=[{title:"图片",slot:"pic",align:"center",minWidth:"80px"},{title:"售价",slot:"price",align:"center",minWidth:"120px"},{title:"成本价",slot:"cost",align:"center",minWidth:"120px"},{title:"划线价",slot:"ot_price",align:"center",minWidth:"120px"},{title:"库存",slot:"stock",align:"center",minWidth:"120px"},{title:"商品编码",slot:"bar_code",align:"center",minWidth:"120px"},{title:"条形码",slot:"bar_code_number",align:"center",minWidth:"120px"},{title:"重量（KG）",slot:"weight",align:"center",minWidth:"95px"},{title:"体积(m³)",slot:"volume",align:"center",minWidth:"95px"},{title:"默认选中规格",slot:"selected_spec",fixed:"right",align:"center",minWidth:"100px"},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:"120px"}],N=[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:120},{title:"成本价",slot:"cost",align:"center",minWidth:120},{title:"原价",slot:"ot_price",align:"center",minWidth:120},{title:"库存",slot:"stock",align:"center",minWidth:120},{title:"产品编号",slot:"bar_code",align:"center",minWidth:120},{title:"虚拟商品",slot:"fictitious",align:"center",minWidth:120},{title:"默认选中规格",slot:"selected_spec",fixed:"right",align:"center",minWidth:90},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:120}],L=[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:120},{title:"成本价",slot:"cost",align:"center",minWidth:120},{title:"原价",slot:"ot_price",align:"center",minWidth:120},{title:"库存",slot:"stock",align:"center",minWidth:120},{title:"产品编号",slot:"bar_code",align:"center",minWidth:120},{title:"默认选中规格",slot:"selected_spec",fixed:"right",align:"center",minWidth:90},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:120}],D=[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"划线价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编码",slot:"bar_code",align:"center",minWidth:120},{title:"条形码",slot:"bar_code_number",align:"center",minWidth:120},{title:"重量（KG）",slot:"weight",align:"center",minWidth:95},{title:"体积(m³)",slot:"volume",align:"center",minWidth:95},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:120}],I=[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"原价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编码",slot:"bar_code",align:"center",minWidth:120},{title:"条形码",slot:"bar_code_number",align:"center",minWidth:120},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:120}],P=[{value:"text",label:"文本框"},{value:"number",label:"数字"},{value:"email",label:"邮件"},{value:"data",label:"日期"},{value:"time",label:"时间"},{value:"id",label:"身份证"},{value:"phone",label:"手机号"},{value:"img",label:"图片"}],A={store_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],cate_id:[{required:!0,message:"请选择商品分类",trigger:"change",type:"array",min:"1"}],unit_name:[{required:!0,message:"请输入单位",trigger:"blur"}],slider_image:[{required:!0,message:"请上传商品轮播图",type:"array",trigger:"change"}],spec_type:[{required:!0,message:"请选择商品规格",trigger:"change"}],is_virtual:[{required:!0,message:"请选择商品类型",trigger:"change"}],selectRule:[{required:!0,message:"请选择商品规格属性",trigger:"change"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change",type:"number"}],presale_time:[{required:!0,type:"array",message:"请选择活动时间",trigger:"change"}],logistics:[{required:!0,type:"array",min:1,message:"请选择物流方式",trigger:"change"},{type:"array",max:2,message:"请选择物流方式",trigger:"change"}],give_integral:[{type:"integer",message:"请输入整数"}]},j={name:"BasicInfo",components:{useLabel:h},props:{formValidate:{type:Object,required:!0},goodsType:{type:Array,required:!0},treeSelect:{type:Array,required:!0},tileLabelList:{type:Array,required:!0},upload:{type:Object,required:!0},isCai:{type:Number|String,required:!0}},methods:{virtualbtn:function(t,e){this.$emit("virtualbtn",t,e)},handleDragStart:function(t,e){this.$emit("handleDragStart",t,e)},handleDragOver:function(t,e){this.$emit("handleDragOver",t,e)},handleDragEnter:function(t,e){this.$emit("handleDragEnter",t,e)},handleDragEnd:function(t,e){this.$emit("handleDragEnd",t,e)},handleRemove:function(t){this.$emit("handleRemove",t)},modalPicTap:function(t){this.$emit("modalPicTap",t)},addVideo:function(){this.$emit("addVideo")},delVideo:function(){this.$emit("delVideo")},addCate:function(){this.$emit("addCate")},addGoodsTag:function(){this.$emit("addGoodsTag")}}},R=(j=(a("be29"),Object(v.a)(j,(function(){var t=this,e=t._self._c;return e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品类型：",props:"is_virtual"}},t._l(t.goodsType,(function(a,i){return e("div",{directives:[{name:"db-click",rawName:"v-db-click"},{name:"show",rawName:"v-show",value:t.formValidate.id&&t.formValidate.virtual_type==a.id||-1==t.isCai&&0==i&&!t.formValidate.id||0==t.isCai&&!t.formValidate.id,expression:"\n          (formValidate.id && formValidate.virtual_type == item.id) ||\n          (isCai == -1 && index == 0 && !formValidate.id) ||\n          (isCai == 0 && !formValidate.id)\n        "}],key:i,staticClass:"virtual",class:t.formValidate.virtual_type==a.id?"virtual_boder":"virtual_boder2",on:{click:function(e){return t.virtualbtn(a.id,2)}}},[e("div",{staticClass:"virtual_top"},[t._v(t._s(a.tit))]),e("div",{staticClass:"virtual_bottom"},[t._v("("+t._s(a.tit2)+")")]),t.formValidate.virtual_type==a.id?e("div",{staticClass:"virtual_san"}):t._e(),t.formValidate.virtual_type==a.id?e("div",{staticClass:"virtual_dui"},[t._v("✓")]):t._e()])})),0)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品名称：",prop:"store_name"}},[e("el-input",{staticClass:"content_width",attrs:{placeholder:"请输入商品名称",maxlength:"80","show-word-limit":""},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name",e)},expression:"formValidate.store_name"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"单位：",prop:"unit_name"}},[e("el-input",{staticClass:"input_width",attrs:{placeholder:"请输入单位",maxlength:"5","show-word-limit":""},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品轮播图：",prop:"slider_image"}},[e("div",{staticClass:"acea-row"},[t._l(t.formValidate.slider_image,(function(a,i){return e("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragOver(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a,expression:"item"}]}),e("i",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"el-icon-error btndel",on:{click:function(e){return t.handleRemove(i)}}})])})),t.formValidate.slider_image.length<10?e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})]):t._e(),e("el-input",{staticStyle:{display:"none"},model:{value:t.formValidate.slider_image[0],callback:function(e){t.$set(t.formValidate.slider_image,0,e)},expression:"formValidate.slider_image[0]"}})],2),e("div",{staticClass:"tips-info"},[t._v("建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传10张")])])],1),e("el-col",{attrs:{span:24,id:"selectvideo"}},[e("el-form-item",{attrs:{label:"添加视频：",prop:"video_link"}},[t.formValidate.video_link?t._e():e("div",{staticClass:"videbox",on:{click:t.addVideo}},[e("i",{staticClass:"el-icon-video-camera"})]),t.formValidate.video_link?e("div",{staticClass:"box-video-style"},[e("video",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.formValidate.video_link,controls:"controls"}},[t._v("\n          您的浏览器不支持 video 标签。\n        ")]),e("div",{staticClass:"mark"}),e("i",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"el-icon-delete iconv",on:{click:t.delVideo}})]):t._e(),t.upload.videoIng?e("Progress",{staticClass:"progress",attrs:{percent:t.progress,"stroke-width":5}}):t._e(),e("div",{staticClass:"tips-info"},[t._v("建议时长：9～30秒，视频宽高比16:9")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品分类：",prop:"cate_id"}},[e("el-cascader",{staticClass:"content_width",attrs:{filterable:"",size:"small",options:t.treeSelect,props:{multiple:!0,checkStrictly:!0,emitPath:!1},clearable:""},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}}),e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",on:{click:t.addCate}},[t._v("新增分类")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品标签："}},[e("div",{staticClass:"flex"},[t.tileLabelList.length?e("useLabel",{attrs:{activeId:t.formValidate.label_list,listData:t.tileLabelList},on:{"update:activeId":function(e){return t.$set(t.formValidate,"label_list",e)},"update:active-id":function(e){return t.$set(t.formValidate,"label_list",e)}}}):t._e(),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.addGoodsTag}},[t._v("选择标签")])],1)])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品状态："}},[e("el-radio-group",{model:{value:t.formValidate.is_show,callback:function(e){t.$set(t.formValidate,"is_show",e)},expression:"formValidate.is_show"}},[e("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("上架")]),e("el-radio",{attrs:{label:0}},[t._v("下架")])],1)],1)],1)],1)}),[],!1,null,"3c2d6c2b",null).exports),a("c7cd"),a("0f32")),M=a.n(R),W=(R={name:"el-table-virtual-scroll",props:{data:{type:Array,required:!0},height:{type:Number,default:60},buffer:{type:Number,default:500},keyProp:{type:String,default:"id"},throttleTime:{type:Number,default:100}},data:function(){return{sizes:{}}},computed:{offsetMap:function(t){for(var e=t.keyProp,a=t.height,i=t.sizes,n=t.data,o={},r=0,l=0;l<n.length;l++){var s=n[l][e];s=(o[s]=r,i[s]);r+="number"==typeof s?s:a}return o}},methods:{initData:function(){var t=this;this.renderData=[],this.top=void 0,this.bottom=void 0,this.start=0,this.end=void 0,this.scroller=this.$el.querySelector(".el-table__body-wrapper"),setTimeout((function(){t.handleScroll()}),100),this.onScroll=M()(this.handleScroll,this.throttleTime),this.scroller.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onScroll)},updateSizes:function(){var t=this,e=this.$el.querySelectorAll(".el-table__body > tbody > .el-table__row");Array.from(e).forEach((function(e,a){a=t.renderData[a];a&&(a=a[t.keyProp],e=e.offsetHeight,t.sizes[a]!==e)&&t.$set(t.sizes,a,e)}))},handleScroll:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.updateSizes(),this.calcRenderData(),this.calcPosition(),t&&this.updatePosition(),this.$emit("change",this.renderData,this.start,this.end)},getOffsetTop:function(t){return t=this.data[t],t&&this.offsetMap[t[this.keyProp]]||0},getSize:function(t){t=this.data[t];return t&&(t=t[this.keyProp],this.sizes[t])||this.height},calcRenderData:function(){for(var t=this.scroller,e=this.data,a=this.buffer,i=t.scrollTop-a,n=t.scrollTop+t.offsetHeight+a,o=0,r=e.length-1,l=0;o<=r;)if(l=Math.floor((o+r)/2),this.getOffsetTop(l)<i){if(i<this.getOffsetTop(l+1))break;o=l+1}else r=l-1;t=l;for(var s=e.length-1,c=t+1;c<e.length;c++)if(n<=this.getOffsetTop(c)){s=c;break}t%2&&(t-=1),this.top=i,this.bottom=n,this.start=t,this.end=s,this.renderData=e.slice(t,s+1)},calcPosition:function(){var t=this,e=this.data.length-1,a=this.getOffsetTop(e)+this.getSize(e),i=this.getOffsetTop(this.start);[".el-table__body-wrapper",".el-table__fixed-right .el-table__fixed-body-wrapper",".el-table__fixed .el-table__fixed-body-wrapper"].forEach((function(e){var n,o;e=t.$el.querySelector(e);e&&(e.wrapEl||(n=document.createElement("div"),o=document.createElement("div"),n.appendChild(o),o.appendChild(e.children[0]),e.insertBefore(n,e.firstChild),e.wrapEl=n,e.innerEl=o),e.wrapEl)&&(e.wrapEl.style.height=a+"px",e.innerEl.style.transform="translateY(".concat(i,"px)"))}))},updatePosition:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer&&clearTimeout(t.timer),t.handleScroll(!1)}),this.throttleTime+10)},update:function(){this.handleScroll()},scrollTo:function(t){var e=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.data[t]&&this.scroller&&(this.updateSizes(),this.calcRenderData(),this.$nextTick((function(){var i=e.getOffsetTop(t);e.scroller.scrollTop=i,a||setTimeout((function(){e.scrollTo(t,!0)}),50)})))},reset:function(){this.sizes={},this.scrollTo(0,!1)}},watch:{data:function(){this.update()}},created:function(){var t=this;this.$nextTick((function(){t.initData()}))},beforeDestroy:function(){this.scroller&&(this.scroller.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll))}},R=Object(v.a)(R,(function(){return(0,this._self._c)("div",[this._t("default")],2)}),[],!1,null,"bdf88d28",null).exports,f={name:"SpecStock",components:{draggable:f.a,VirtualScroll:R},props:{formValidate:{type:Object,required:!0},ruleList:{type:Array,required:!0},attrs:{type:Array,required:!0},manyFormValidate:{type:Array,required:!0},oneFormValidate:{type:Array,required:!0},tableKey:{type:Number,required:!0},canSel:{type:Boolean,required:!0},formDynamic:{type:Object,required:!0},oneFormBatch:{type:Array,required:!0}},data:function(){return{virtualList:[]}},methods:{changeSpec:function(t){this.$emit("changeSpec",t)},confirm:function(t){this.$emit("confirm",t)},onMoveSpec:function(t){this.$emit("onMoveSpec",t)},changeDefaultSelect:function(t,e){this.$emit("changeDefaultSelect",t,e)},changeDefaultShow:function(t){this.$emit("changeDefaultShow",t)},modalPicTap:function(t,e,a){this.$emit("modalPicTap",t,e,a)},handleRemove2:function(t,e,a){this.$emit("handleRemove2",t,e,a)},batchAdd:function(){this.$emit("batchAdd")},handleAddRole:function(){this.$emit("handleAddRole")},batchDel:function(){this.$emit("batchDel")},handleFocus:function(t){this.$emit("handleFocus",t)},attrDetailChangeValue:function(t,e){this.$emit("attrDetailChangeValue",t,e)},handleBlur:function(t){this.$emit("handleBlur",t)},attrChangeValue:function(t,e){this.$emit("attrChangeValue",t,e)},handleShowPop:function(t){this.$emit("handleShowPop",t)},handleSelImg:function(t){this.$emit("handleSelImg",t)},handleSaveAsTemplate:function(){this.$emit("handleSaveAsTemplate")},addGoodsCoupon:function(t,e){this.$emit("addGoodsCoupon",t,e)},changeCurrentIndex:function(t){this.$emit("changeCurrentIndex",t)},addVirtual:function(t,e){this.$emit("addVirtual",t,e)},handleRemoveImg:function(t){this.$emit("handleRemoveImg",t)},handleRemoveRole:function(t){this.$emit("handleRemoveRole",t)},see:function(t,e,a){this.$emit("see",t,e,a)},createAttr:function(t,e){this.$emit("createAttr",t,e)},tableCellClassName:function(t){var e=t.row,a=t.column,i=t.columnIndex;e.index=t.rowIndex||"",a.index=i},addPic:function(t,e){var a=this;t?(this.attrs.map((function(t,i){i!==e&&a.$set(t,"add_pic",0)})),this.canSel=!1):this.canSel=!0},objectSpanMethod:function(t){t.row;var e=t.rowIndex;if(0===t.columnIndex&&0<e){var a=t.column.label,i=this.manyFormValidate[e].detail[a];t=this.manyFormValidate.findIndex((function(t,e){if(0<e)return t.detail[a]==i}));if(e!=t)return{rowspan:0,colspan:0};for(var n=1,o=t+1;o<this.manyFormValidate.length&&this.manyFormValidate[o].detail[a]===i;o++)n++;return{rowspan:n,colspan:1}}}}},R=(a("a123"),Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"规格类型：",props:"spec_type"}},[e("el-radio-group",{on:{input:t.changeSpec},model:{value:t.formValidate.spec_type,callback:function(e){t.$set(t.formValidate,"spec_type",e)},expression:"formValidate.spec_type"}},[e("el-radio",{staticClass:"radio",attrs:{label:0}},[t._v("单规格")]),e("el-radio",{attrs:{label:1}},[t._v("多规格")])],1),1==t.formValidate.spec_type?e("el-dropdown",{staticClass:"ml20",attrs:{trigger:"hover"},on:{command:t.confirm}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" 选择规格模版"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.ruleList,(function(a,i){return e("el-dropdown-item",{key:i,attrs:{command:a.rule_name}},[t._v(t._s(a.rule_name))])})),1)],1):t._e()],1)],1),1===t.formValidate.spec_type?e("el-col",{staticClass:"noForm",attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品规格：",prop:""}},[e("div",{staticClass:"specifications"},[e("draggable",{attrs:{group:"specifications",disabled:t.attrs.length<2,list:t.attrs,handle:".move-icon",animation:"300"},on:{end:t.onMoveSpec}},t._l(t.attrs,(function(a,i){return e("div",{key:i,staticClass:"specifications-item active",on:{click:function(e){return t.changeCurrentIndex(i)}}},[e("div",{staticClass:"move-icon"},[e("span",{staticClass:"iconfont icondrag2"})]),e("i",{staticClass:"del el-icon-error",on:{click:function(e){return t.handleRemoveRole(i,a.value)}}}),e("div",{staticClass:"specifications-item-box"},[e("div",{staticClass:"lineBox"}),e("div",{staticClass:"specifications-item-name mb18"},[e("el-input",{staticClass:"specifications-item-name-input",attrs:{placeholder:"规格名称",maxlength:"30","show-word-limit":""},on:{change:function(e){return t.attrChangeValue(i,a.value)},focus:function(e){return t.handleFocus(a.value)}},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"item.value"}}),e("el-checkbox",{staticClass:"ml20",attrs:{disabled:!a.add_pic&&!t.canSel,"true-label":1,"false-label":0},on:{change:function(e){return t.addPic(e,i)}},model:{value:a.add_pic,callback:function(e){t.$set(a,"add_pic",e)},expression:"item.add_pic"}},[t._v("添加规格图")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加规格图片, 仅支持打开一个(建议尺寸:800*800)",placement:"right"}},[e("i",{staticClass:"el-icon-info"})])],1),e("div",{staticClass:"rulesBox ml30"},[e("draggable",{staticClass:"item",attrs:{list:a.detail,disabled:a.detail.length<2,handle:".drag"},on:{end:t.onMoveSpec}},[t._l(a.detail,(function(n,o){return e("div",{key:o,staticClass:"mr10 spec drag"},[e("i",{staticClass:"el-icon-error",on:{click:function(e){return t.handleRemove2(a.detail,o,n.value)}}}),e("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"规格值",maxlength:"30"},on:{change:function(e){return t.attrDetailChangeValue(n.value,i)},focus:function(e){return t.handleFocus(n.value)},blur:function(e){return t.handleBlur()}},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"det.value"}},[e("template",{slot:"prefix"},[e("span",{staticClass:"iconfont icondrag2"})])],2),a.add_pic?e("div",{staticClass:"img-popover"},[e("div",{staticClass:"popper-arrow"}),e("div",{staticClass:"popper",on:{click:function(e){return t.handleSelImg(n,o)}}},[n.pic?e("img",{staticClass:"img",attrs:{src:n.pic}}):e("i",{staticClass:"el-icon-plus"})]),n.pic?e("i",{staticClass:"img-del el-icon-error",on:{click:function(e){return t.handleRemoveImg(n)}}}):t._e()]):t._e()],1)})),e("el-popover",{ref:"popoverRef_"+i,refInFor:!0,attrs:{placement:"",width:"210",trigger:"click"},on:{"after-enter":function(e){return t.handleShowPop(i)}}},[e("el-input",{ref:"inputRef_"+i,refInFor:!0,attrs:{placeholder:"请输入规格值",maxlength:"30","show-word-limit":""},on:{blur:function(e){return t.createAttr(t.formDynamic.attrsVal,i)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createAttr(t.formDynamic.attrsVal,i)}},model:{value:t.formDynamic.attrsVal,callback:function(e){t.$set(t.formDynamic,"attrsVal",e)},expression:"formDynamic.attrsVal"}}),e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("添加规格值")])],1)],2)],1)])])})),0),t.attrs.length<4?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.handleAddRole()}}},[t._v("添加新规格")]):t._e(),1<=t.attrs.length?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"text"},on:{click:function(e){return t.handleSaveAsTemplate()}}},[t._v("另存为模板")]):t._e()],1)])],1):t._e(),1===t.formValidate.spec_type?e("el-col",{attrs:{span:24}},[t.manyFormValidate.length?e("el-form-item",{staticClass:"labeltop",attrs:{label:"商品属性："}},[e("VirtualScroll",{attrs:{data:t.manyFormValidate,buffer:50,height:62,"key-prop":"index"},on:{change:function(e){return t.virtualList=e}}},[e("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{"row-key":"index",height:"700px",data:t.manyFormValidate,"cell-class-name":t.tableCellClassName,"span-method":t.objectSpanMethod,border:""}},t._l(t.formValidate.header,(function(a,i){return e("el-table-column",{key:i,attrs:{label:a.title,"min-width":a.minWidth||"100",fixed:a.fixed},scopedSlots:t._u([{key:"default",fn:function(i){return[0==i.$index?[a.key?[t.attrs.length&&t.attrs[i.column.index]&&t.manyFormValidate.length?e("div",[e("el-select",{attrs:{placeholder:"请选择".concat(a.title),clearable:""},model:{value:t.oneFormBatch[0][a.title],callback:function(e){t.$set(t.oneFormBatch[0],a.title,e)},expression:"oneFormBatch[0][item.title]"}},t._l(t.attrs[i.column.index].detail,(function(t){return e("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1):t._e()]:"pic"===a.slot?[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"acea-row row-middle",on:{click:function(e){return t.modalPicTap("dan","duopi",i.$index)}}},[t.oneFormBatch[0].pic?e("div",{staticClass:"pictrue pictrueTab"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):e("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])]:"price"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].price,callback:function(e){t.$set(t.oneFormBatch[0],"price",e)},expression:"oneFormBatch[0].price"}})]:"cost"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].cost,callback:function(e){t.$set(t.oneFormBatch[0],"cost",e)},expression:"oneFormBatch[0].cost"}})]:"ot_price"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,clearable:""},model:{value:t.oneFormBatch[0].ot_price,callback:function(e){t.$set(t.oneFormBatch[0],"ot_price",e)},expression:"oneFormBatch[0].ot_price"}})]:"stock"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,disabled:1==t.formValidate.virtual_type,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].stock,callback:function(e){t.$set(t.oneFormBatch[0],"stock",e)},expression:"oneFormBatch[0].stock"}})]:"fictitious"===a.slot?[t._v(" -- ")]:"bar_code"===a.slot?[e("el-input",{model:{value:t.oneFormBatch[0].bar_code,callback:function(e){t.$set(t.oneFormBatch[0],"bar_code",e)},expression:"oneFormBatch[0].bar_code"}})]:"bar_code_number"===a.slot?[e("el-input",{model:{value:t.oneFormBatch[0].bar_code_number,callback:function(e){t.$set(t.oneFormBatch[0],"bar_code_number",e)},expression:"oneFormBatch[0].bar_code_number"}})]:"weight"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,step:.1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].weight,callback:function(e){t.$set(t.oneFormBatch[0],"weight",e)},expression:"oneFormBatch[0].weight"}})]:"volume"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,step:.1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].volume,callback:function(e){t.$set(t.oneFormBatch[0],"volume",e)},expression:"oneFormBatch[0].volume"}})]:"selected_spec"===a.slot?[t._v(" -- ")]:"action"===a.slot?[e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.batchAdd}},[t._v("批量修改")]),e("el-divider",{attrs:{direction:"vertical"}}),e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.batchDel}},[t._v("清空")])]:t._e()]:[a.key?[e("div",[e("span",[t._v(t._s(i.row.detail[a.key]))])])]:t._e(),"pic"===a.slot?[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"acea-row row-middle",on:{click:function(e){return t.modalPicTap("dan","duoTable",i.$index)}}},[t.manyFormValidate[i.$index].pic?e("div",{staticClass:"pictrue pictrueTab"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.manyFormValidate[i.$index].pic,expression:"manyFormValidate[scope.$index].pic"}]})]):e("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])]:t._e(),"price"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[i.$index].price,callback:function(e){t.$set(t.manyFormValidate[i.$index],"price",e)},expression:"manyFormValidate[scope.$index].price"}})]:"cost"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[i.$index].cost,callback:function(e){t.$set(t.manyFormValidate[i.$index],"cost",e)},expression:"manyFormValidate[scope.$index].cost"}})]:"ot_price"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[i.$index].ot_price,callback:function(e){t.$set(t.manyFormValidate[i.$index],"ot_price",e)},expression:"manyFormValidate[scope.$index].ot_price"}})]:"stock"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,disabled:1==t.formValidate.virtual_type,min:0,max:9999999999,precision:0},model:{value:t.manyFormValidate[i.$index].stock,callback:function(e){t.$set(t.manyFormValidate[i.$index],"stock",e)},expression:"manyFormValidate[scope.$index].stock"}})]:"bar_code"===a.slot?[e("el-input",{model:{value:t.manyFormValidate[i.$index].bar_code,callback:function(e){t.$set(t.manyFormValidate[i.$index],"bar_code",e)},expression:"manyFormValidate[scope.$index].bar_code"}})]:"bar_code_number"===a.slot?[e("el-input",{model:{value:t.manyFormValidate[i.$index].bar_code_number,callback:function(e){t.$set(t.manyFormValidate[i.$index],"bar_code_number",e)},expression:"manyFormValidate[scope.$index].bar_code_number"}})]:"weight"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[i.$index].weight,callback:function(e){t.$set(t.manyFormValidate[i.$index],"weight",e)},expression:"manyFormValidate[scope.$index].weight"}})]:"volume"===a.slot?[e("el-input-number",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[i.$index].volume,callback:function(e){t.$set(t.manyFormValidate[i.$index],"volume",e)},expression:"manyFormValidate[scope.$index].volume"}})]:"fictitious"===a.slot?[t.manyFormValidate[i.$index].coupon_id||2!=t.formValidate.virtual_type?t.manyFormValidate[i.$index].coupon_id&&2==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.manyFormValidate[i.$index],"manyFormValidate",i.$index)}}},[t._v(t._s(t.manyFormValidate[i.$index].coupon_name))]):t.manyFormValidate[i.$index].virtual_list.length||t.manyFormValidate[i.$index].stock||1!=t.formValidate.virtual_type?(t.manyFormValidate[i.$index].virtual_list.length||t.manyFormValidate[i.$index].stock)&&1==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.manyFormValidate[i.$index],"manyFormValidate",i.$index)}}},[t._v("已设置")]):t._e():e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addVirtual(i.$index,"manyFormValidate")}}},[t._v("添加卡密")]):e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addGoodsCoupon(i.$index,"manyFormValidate")}}},[t._v("选择优惠券")])]:"selected_spec"===a.slot?[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){return t.changeDefaultSelect(e,i.$index)}},model:{value:t.manyFormValidate[i.$index].is_default_select,callback:function(e){t.$set(t.manyFormValidate[i.$index],"is_default_select",e)},expression:"manyFormValidate[scope.$index].is_default_select"}})]:"action"===a.slot?[e("el-switch",{staticClass:"defineSwitch",attrs:{"active-text":"显示","inactive-text":"隐藏","active-value":1,"inactive-value":0},on:{change:function(e){return t.changeDefaultShow(i.$index)}},model:{value:t.manyFormValidate[i.$index].is_show,callback:function(e){t.$set(t.manyFormValidate[i.$index],"is_show",e)},expression:"manyFormValidate[scope.$index].is_show"}})]:t._e()]]}}],null,!0)})})),1)],1)],1):t._e()],1):t._e(),0===t.formValidate.spec_type?e("div",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"图片："}},[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"pictrueBox",on:{click:function(e){return t.modalPicTap("dan","danTable",0)}}},[t.oneFormValidate[0].pic?e("div",{staticClass:"pictrue"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]}),e("el-input",{staticStyle:{display:"none"},model:{value:t.oneFormValidate[0].pic,callback:function(e){t.$set(t.oneFormValidate[0],"pic",e)},expression:"oneFormValidate[0].pic"}})],1):e("div",{staticClass:"upLoad acea-row row-center-wrapper"},[e("el-input",{staticStyle:{display:"none"},model:{value:t.oneFormValidate[0].pic,callback:function(e){t.$set(t.oneFormValidate[0],"pic",e)},expression:"oneFormValidate[0].pic"}}),e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})],1)])])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"售价："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,precision:2,max:9999999999,"active-change":!1,"class-unit":"元"},model:{value:t.oneFormValidate[0].price,callback:function(e){t.$set(t.oneFormValidate[0],"price",e)},expression:"oneFormValidate[0].price"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"成本价："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,precision:2,"active-change":!1,"class-unit":"元"},model:{value:t.oneFormValidate[0].cost,callback:function(e){t.$set(t.oneFormValidate[0],"cost",e)},expression:"oneFormValidate[0].cost"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"划线价："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,precision:2,"active-change":!1,"class-unit":"元"},model:{value:t.oneFormValidate[0].ot_price,callback:function(e){t.$set(t.oneFormValidate[0],"ot_price",e)},expression:"oneFormValidate[0].ot_price"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"库存："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,disabled:1==t.formValidate.virtual_type,precision:0,"class-unit":t.formValidate.unit_name||"件"},model:{value:t.oneFormValidate[0].stock,callback:function(e){t.$set(t.oneFormValidate[0],"stock",e)},expression:"oneFormValidate[0].stock"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品编码："}},[e("el-input",{staticClass:"input_width",model:{value:t.oneFormValidate[0].bar_code,callback:function(e){t.$set(t.oneFormValidate[0],"bar_code","string"==typeof e?e.trim():e)},expression:"oneFormValidate[0].bar_code"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"条形码："}},[e("el-input",{staticClass:"input_width",model:{value:t.oneFormValidate[0].bar_code_number,callback:function(e){t.$set(t.oneFormValidate[0],"bar_code_number","string"==typeof e?e.trim():e)},expression:"oneFormValidate[0].bar_code_number"}})],1)],1),0==t.formValidate.virtual_type?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"重量："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"kg"},model:{value:t.oneFormValidate[0].weight,callback:function(e){t.$set(t.oneFormValidate[0],"weight",e)},expression:"oneFormValidate[0].weight"}})],1)],1):t._e(),e("el-col",{attrs:{span:24}},[0==t.formValidate.virtual_type?e("el-form-item",{attrs:{label:"体积："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"m³"},model:{value:t.oneFormValidate[0].volume,callback:function(e){t.$set(t.oneFormValidate[0],"volume",e)},expression:"oneFormValidate[0].volume"}})],1):t._e()],1),e("el-col",{attrs:{span:24}},[1==t.formValidate.virtual_type||2==t.formValidate.virtual_type?e("el-form-item",{attrs:{label:1==t.formValidate.virtual_type?"添加卡密/网盘：":"选择优惠券："}},[t.oneFormValidate[0].coupon_id||2!=t.formValidate.virtual_type?t.oneFormValidate[0].coupon_id&&2==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.oneFormValidate[0],"oneFormValidate",0)}}},[t._v(t._s(t.oneFormValidate[0].coupon_name))]):t._e():e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addGoodsCoupon(0,"oneFormValidate")}}},[t._v("选择优惠券")]),t.oneFormValidate[0].virtual_list.length||t.oneFormValidate[0].stock||1!=t.formValidate.virtual_type?(t.oneFormValidate[0].virtual_list.length||0<t.oneFormValidate[0].stock)&&1==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.oneFormValidate[0],"oneFormValidate",0)}}},[t._v("已设置")]):t._e():e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addVirtual(0,"oneFormValidate")}}},[t._v("添加卡密")])],1):t._e()],1)],1):t._e()],1)}),[],!1,null,"29e0ff1a",null).exports),f={name:"ProductDetail",components:{WangEditor:a("a069").a},props:{contents:{type:String,required:!0},content:{type:String,required:!0}},methods:{getEditorContent:function(t){this.$emit("getEditorContent",t)}}},f=(a("eda8"),Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:16}},[e("el-form-item",{attrs:{label:"商品详情："}},[e("WangEditor",{staticStyle:{width:"100%"},attrs:{content:t.contents},on:{editorContent:t.getEditorContent}})],1)],1),e("el-col",{staticStyle:{width:"33%"},attrs:{span:6}},[e("div",{staticClass:"ifam"},[e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}})])])],1)}),[],!1,null,"0928afd2",null).exports),{name:"LogisticsSetting",props:{formValidate:{type:Object,required:!0},templateList:{type:Array,required:!0}},methods:{logisticsBtn:function(t){this.$emit("logisticsBtn",t)},addTemp:function(){this.$emit("addTemp")}}}),q=(W=(a("4ca6"),Object(v.a)(W,(function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"物流方式：",prop:"logistics"}},[e("el-checkbox-group",{on:{change:t.logisticsBtn},model:{value:t.formValidate.logistics,callback:function(e){t.$set(t.formValidate,"logistics",e)},expression:"formValidate.logistics"}},[e("el-checkbox",{attrs:{label:"1"}},[t._v("快递")]),e("el-checkbox",{attrs:{label:"2"}},[t._v("到店")])],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"运费设置："}},[e("el-radio-group",{model:{value:t.formValidate.freight,callback:function(e){t.$set(t.formValidate,"freight",e)},expression:"formValidate.freight"}},[e("el-radio",{attrs:{label:2}},[t._v("固定邮费")]),e("el-radio",{attrs:{label:3}},[t._v("运费模板")])],1)],1)],1),3!=t.formValidate.freight&&1!=t.formValidate.freight?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"",prop:1!=t.formValidate.freight?"freight":""}},[e("div",{staticClass:"acea-row"},[e("el-input-number",{staticClass:"input_width maxW input-number-unit-class",attrs:{controls:!1,min:0,placeholder:"请输入金额","class-unit":"元"},model:{value:t.formValidate.postage,callback:function(e){t.$set(t.formValidate,"postage",e)},expression:"formValidate.postage"}})],1)])],1):t._e(),3==t.formValidate.freight?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"",prop:"temp_id"}},[e("div",{staticClass:"acea-row"},[e("el-select",{staticClass:"input_width maxW",attrs:{clearable:"",placeholder:"请选择运费模板"},model:{value:t.formValidate.temp_id,callback:function(e){t.$set(t.formValidate,"temp_id",e)},expression:"formValidate.temp_id"}},t._l(t.templateList,(function(t,a){return e("el-option",{key:a,attrs:{value:t.id,label:t.name}})})),1),e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",on:{click:t.addTemp}},[t._v("新增运费模板")])],1)])],1):t._e()],1)}),[],!1,null,"65c1f47b",null).exports),{name:"PriceCommission",props:{formValidate:{type:Object,required:!0},oneFormValidate:{type:Array,required:!0},manyFormValidate:{type:Array,required:!0},columnsInstall:{type:Array,required:!0},columnsInstal2:{type:Array,required:!0},manyBrokerage:{type:void 0|Number,required:!0},manyBrokerageTwo:{type:void 0|Number,required:!0},manyVipPrice:{type:void 0|Number,required:!0},manyVipDiscount:{type:void 0|Number,required:!0}},methods:{checkAllGroupChange:function(t){this.$emit("checkAllGroupChange",t)},changeVipPrice:function(t,e){this.$emit("changeVipPrice",t,e)},changeDiscount:function(t,e){this.$emit("changeDiscount",t,e)},brokerageSetUp:function(){this.$emit("brokerageSetUp")}}}),E=(q=(a("7f7a"),Object(v.a)(q,(function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"付费会员专属："}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,size:"large"},model:{value:t.formValidate.vip_product,callback:function(e){t.$set(t.formValidate,"vip_product",e)},expression:"formValidate.vip_product"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),e("div",{staticClass:"tips-info"},[t._v("开启后仅付费会员可以看见并购买此商品")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"单独设置："}},[e("el-checkbox-group",{on:{change:t.checkAllGroupChange},model:{value:t.formValidate.is_sub,callback:function(e){t.$set(t.formValidate,"is_sub",e)},expression:"formValidate.is_sub"}},[e("el-checkbox",{attrs:{label:1}},[t._v("佣金设置（数字即返佣金额）")]),e("el-checkbox",{attrs:{label:0}},[t._v("付费会员价")])],1)],1)],1),t.formValidate.is_sub.length?e("el-col",{attrs:{span:24}},[0===t.formValidate.spec_type?e("el-form-item",{attrs:{label:"商品属性："}},[e("el-table",{attrs:{data:t.oneFormValidate}},t._l(t.columnsInstall,(function(a,i){return e("el-table-column",{key:i,attrs:{label:a.title,"min-width":a.minWidth},scopedSlots:t._u([{key:"default",fn:function(i){return[a.key?[e("div",[e("span",[t._v(t._s(i.row[a.key]))])])]:"pic"===a.slot?[e("div",{staticClass:"pictrue pictrueTab"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]})])]:"price"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].price))])]:"cost"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].cost))])]:"ot_price"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].ot_price))])]:"stock"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].stock))])]:"bar_code"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].bar_code))])]:"bar_code_number"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].bar_code_number))])]:"weight"===a.slot?[e("span",[t._v(t._s(t.oneFormValidate[0].weight))])]:"fictitious"===a.slot?[t.row.coupon_id||2!=t.formValidate.virtual_type?t.row.coupon_id&&2==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.row,"manyFormValidate",i.$index)}}},[t._v(t._s(t.row.coupon_name))]):t.row.virtual_list.length||t.row.stock||1!=t.formValidate.virtual_type?(t.row.virtual_list.length||t.row.stock)&&1==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.row,"oneFormValidate",i.$index)}}},[t._v("已设置")]):t._e():e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addVirtual(i.$index,"oneFormValidate")}}},[t._v("添加卡密")]):e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addGoodsCoupon(i.$index,"oneFormValidate")}}},[t._v("选择优惠券")])]:"brokerage"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"元"},model:{value:t.oneFormValidate[0].brokerage,callback:function(e){t.$set(t.oneFormValidate[0],"brokerage",e)},expression:"oneFormValidate[0].brokerage"}})]:"brokerage_two"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"元"},model:{value:t.oneFormValidate[0].brokerage_two,callback:function(e){t.$set(t.oneFormValidate[0],"brokerage_two",e)},expression:"oneFormValidate[0].brokerage_two"}})]:"vip_price"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"元"},on:{input:function(e){return t.changeVipPrice(0,"oneFormValidate")}},model:{value:t.oneFormValidate[0].vip_price,callback:function(e){t.$set(t.oneFormValidate[0],"vip_price",e)},expression:"oneFormValidate[0].vip_price"}})]:"vip_proportion"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,"class-unit":"%"},on:{input:function(e){return t.changeDiscount(0,"oneFormValidate")}},model:{value:t.oneFormValidate[0].vip_proportion,callback:function(e){t.$set(t.oneFormValidate[0],"vip_proportion",e)},expression:"oneFormValidate[0].vip_proportion"}})]:t._e()]}}],null,!0)})})),1)],1):t._e(),1===t.formValidate.spec_type?e("el-form-item",{attrs:{label:"批量设置："}},[-1<t.formValidate.is_sub.indexOf(1)?e("span",[e("span",{staticClass:"brokerage"},[t._v("一级返佣：")]),e("el-input-number",{staticClass:"columnsBox input_width input-number-unit-class",attrs:{controls:!1,placeholder:"请输入一级返佣","class-unit":"元",value:t.manyBrokerage},on:{input:function(e){return t.$emit("update:manyBrokerage",e)}}}),e("span",{staticClass:"brokerage"},[t._v("二级返佣：")]),e("el-input-number",{staticClass:"columnsBox input_width input-number-unit-class",attrs:{controls:!1,placeholder:"请输入二级返佣","class-unit":"元",value:t.manyBrokerageTwo},on:{input:function(e){return t.$emit("update:manyBrokerageTwo",e)}}})],1):t._e(),-1<t.formValidate.is_sub.indexOf(0)?e("span",{staticClass:"brokerage"},[t._v("\n        会员价："),e("el-input-number",{staticClass:"columnsBox input_width input-number-unit-class",attrs:{controls:!1,placeholder:"请输入会员价",min:0,max:9999999999,"class-unit":"元",value:t.manyVipPrice},on:{input:function(e){return t.$emit("update:manyVipPrice",e)},focus:function(e){return t.$emit("update:manyVipDiscount",void 0)}}})],1):t._e(),-1<t.formValidate.is_sub.indexOf(0)?e("span",{staticClass:"brokerage"},[t._v("\n        会员折扣："),e("el-input-number",{staticClass:"columnsBox input_width input-number-unit-class",attrs:{controls:!1,placeholder:"请输入折扣比例",min:0,max:9999999999,"class-unit":"%",value:t.manyVipDiscount},on:{input:function(e){return t.$emit("update:manyVipDiscount",e)},focus:function(e){return t.$emit("update:manyVipPrice",void 0)}}})],1):t._e(),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.brokerageSetUp}},[t._v("批量设置")])],1):t._e(),1==t.formValidate.spec_type&&t.formValidate.is_sub.length&&t.manyFormValidate.length&&t.columnsInstal2?e("el-form-item",{attrs:{label:"商品属性："}},[e("el-table",{attrs:{data:t.manyFormValidate.slice(1)}},t._l(t.columnsInstal2,(function(a,i){return e("el-table-column",{key:i,attrs:{label:a.title,"min-width":a.minWidth},scopedSlots:t._u([{key:"default",fn:function(i){return[a.key?[e("div",[e("span",[t._v(t._s(i.row.detail[a.key]))])])]:"pic"===a.slot?[e("div",{staticClass:"pictrue pictrueTab"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.manyFormValidate[i.$index+1].pic,expression:"manyFormValidate[scope.$index + 1].pic"}]})])]:"price"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].price))])]:"cost"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].cost))])]:"ot_price"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].ot_price))])]:"stock"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].stock))])]:"bar_code"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].bar_code))])]:"bar_code_number"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].bar_code_number))])]:"weight"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].weight))])]:"fictitious"===a.slot?[t.row.coupon_id||2!=t.formValidate.virtual_type?t.row.coupon_id&&2==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.row,"manyFormValidate",i.$index+1)}}},[t._v(t._s(t.row.coupon_name))]):t.row.virtual_list.length||t.row.stock||1!=t.formValidate.virtual_type?(t.row.virtual_list.length||t.row.stock)&&1==t.formValidate.virtual_type?e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"see",on:{click:function(e){return t.see(t.row,"manyFormValidate",i.$index+1)}}},[t._v("已设置")]):t._e():e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addVirtual(i.$index+1,"manyFormValidate")}}},[t._v("添加卡密")]):e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:function(e){return t.addGoodsCoupon(i.$index+1,"manyFormValidate")}}},[t._v("选择优惠券")])]:"volume"===a.slot?[e("span",[t._v(t._s(t.manyFormValidate[i.$index+1].volume))])]:"brokerage"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,value:t.manyFormValidate[i.$index+1].brokerage,min:0,max:9999999999,"class-unit":"元"},on:{input:function(e){var a=Object(s.a)(t.manyFormValidate);a[i.$index+1].brokerage=e,t.$emit("update:manyFormValidate",a)}}})]:"brokerage_two"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,value:t.manyFormValidate[i.$index+1].brokerage_two,min:0,max:9999999999,"class-unit":"元"},on:{input:function(e){var a=Object(s.a)(t.manyFormValidate);a[i.$index+1].brokerage_two=e,t.$emit("update:manyFormValidate",a)}}})]:"vip_price"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,value:t.manyFormValidate[i.$index+1].vip_price,min:0,max:9999999999,"class-unit":"元"},on:{input:function(e){var a=Object(s.a)(t.manyFormValidate);a[i.$index+1].vip_price=e,t.$emit("update:manyFormValidate",a),t.changeVipPrice(i.$index+1)}}})]:"vip_proportion"===a.slot?[e("el-input-number",{staticClass:"priceBox input-number-unit-class",attrs:{controls:!1,value:t.manyFormValidate[i.$index+1].vip_proportion,min:0,max:9999999999,"class-unit":"%"},on:{input:function(e){var a=Object(s.a)(t.manyFormValidate);a[i.$index+1].vip_proportion=e,t.$emit("update:manyFormValidate",a),t.changeDiscount(i.$index+1)}}})]:t._e()]}}],null,!0)})})),1)],1):t._e()],1):t._e()],1)}),[],!1,null,"1c2ea244",null).exports),a("4e82"),{name:"MarketingSetting",props:{formValidate:{type:Object,required:!0},couponName:{type:Array,default:function(){return[]}},dataLabel:{type:Array,default:function(){return[]}},activity:{type:Object,default:function(){return{}}}},methods:{handleClose:function(t){this.$emit("handleClose",t)},addCoupon:function(){this.$emit("addCoupon")},openLabel:function(){this.$emit("openLabel")},closeLabel:function(){this.$emit("closeLabel")},addLabel:function(){this.$emit("addLabel")},onchangeTime:function(t){this.$emit("onchangeTime",t)},handleRemoveRecommend:function(t){this.$emit("handleRemoveRecommend",t)},changeGoods:function(t){this.$emit("changeGoods",t)}}}),z=(E=(a("5285"),Object(v.a)(E,(function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"购买送积分：",prop:"give_integral"}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,placeholder:"请输入积分","class-unit":"积分"},model:{value:t.formValidate.give_integral,callback:function(e){t.$set(t.formValidate,"give_integral",e)},expression:"formValidate.give_integral"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"购买送优惠券："}},[t.couponName.length?e("div",{staticClass:"mb10"},t._l(t.couponName,(function(a,i){return e("el-tag",{key:i,staticClass:"mr10",attrs:{closable:""},on:{close:function(e){return t.handleClose(a)}}},[t._v(t._s(a.title))])})),1):t._e(),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("选择优惠券")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"关联用户标签：",prop:"label_id"}},[e("div",{staticStyle:{display:"flex"}},[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openLabel}},[e("div",{staticStyle:{width:"90%"}},[t.dataLabel.length?e("div",t._l(t.dataLabel,(function(a,i){return e("el-tag",{key:i,attrs:{closable:""},on:{close:function(e){return t.closeLabel(a)}}},[t._v(t._s(a.label_name))])})),1):e("span",{staticClass:"span"},[t._v("选择用户关联标签")])]),e("div",{staticClass:"iconfont iconxiayi"})]),e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",on:{click:t.addLabel}},[t._v("新增标签")])])])],1),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"line"})]),0==t.formValidate.virtual_type?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"起购数量："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:1,max:9999999999,precision:0,placeholder:"请输入起购数量","class-unit":t.formValidate.unit_name||"件"},model:{value:t.formValidate.min_qty,callback:function(e){t.$set(t.formValidate,"min_qty",e)},expression:"formValidate.min_qty"}})],1)],1):t._e(),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"是否限购："}},[e("el-switch",{staticClass:"defineSwitch",attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0,size:"large"},model:{value:t.formValidate.is_limit,callback:function(e){t.$set(t.formValidate,"is_limit",e)},expression:"formValidate.is_limit"}})],1)],1),e("el-col",{attrs:{span:24}},[t.formValidate.is_limit?e("el-form-item",{attrs:{label:"限购类型："}},[e("el-radio-group",{model:{value:t.formValidate.limit_type,callback:function(e){t.$set(t.formValidate,"limit_type",e)},expression:"formValidate.limit_type"}},[e("el-radio",{attrs:{label:1}},[t._v("单次限购")]),e("el-radio",{attrs:{label:2}},[t._v("单人限购")])],1),e("div",{staticClass:"tips-info"},[t._v("单次限购是限制每次下单最多购买的数量，单人限购是限制一个用户总共可以购买的数量")])],1):t._e()],1),t.formValidate.is_limit?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"限购数量：",prop:"limit_num"}},[e("div",{staticClass:"acea-row row-middle"},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,placeholder:"请输入限购数量",precision:0,min:1,"class-unit":t.formValidate.unit_name||"件"},model:{value:t.formValidate.limit_num,callback:function(e){t.$set(t.formValidate,"limit_num",e)},expression:"formValidate.limit_num"}})],1)])],1):t._e(),t.formValidate.is_limit?e("el-col",{attrs:{span:24}},[e("div",{staticClass:"line"})]):t._e(),0==t.formValidate.virtual_type||3==t.formValidate.virtual_type?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"预售商品："}},[e("el-switch",{staticClass:"defineSwitch",attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0,size:"large"},model:{value:t.formValidate.presale,callback:function(e){t.$set(t.formValidate,"presale",e)},expression:"formValidate.presale"}})],1)],1):t._e(),t.formValidate.presale?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"预售活动时间：",prop:"presale_time"}},[e("div",{staticClass:"acea-row row-middle"},[e("el-date-picker",{attrs:{clearable:"",editable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.onchangeTime},model:{value:t.formValidate.presale_time,callback:function(e){t.$set(t.formValidate,"presale_time",e)},expression:"formValidate.presale_time"}})],1),e("div",{staticClass:"tips-info"},[t._v("设置活动开启结束时间，用户可以在设置时间内发起参与预售")])])],1):t._e(),t.formValidate.presale?e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"发货时间：",prop:"presale_day"}},[e("div",{staticClass:"acea-row row-middle"},[e("span",{staticClass:"mr10"},[t._v("预售活动结束后")]),e("el-input-number",{staticClass:"w-80 input-number-unit-class",attrs:{controls:!1,placeholder:"请输入发货时间",precision:0,min:1,"class-unit":"天"},model:{value:t.formValidate.presale_day,callback:function(e){t.$set(t.formValidate,"presale_day",e)},expression:"formValidate.presale_day"}}),e("span",{staticClass:"ml10"},[t._v(" 之内 ")])],1)])],1):t._e(),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"line"})]),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品推荐："}},[e("el-checkbox-group",{model:{value:t.formValidate.recommend,callback:function(e){t.$set(t.formValidate,"recommend",e)},expression:"formValidate.recommend"}},[e("el-checkbox",{attrs:{label:"is_hot"}},[t._v("热卖单品")]),e("el-checkbox",{attrs:{label:"is_best"}},[t._v("精品推荐")]),e("el-checkbox",{attrs:{label:"is_new"}},[t._v("首发新品")]),e("el-checkbox",{attrs:{label:"is_good"}},[t._v("优品推荐")])],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"活动优先级："}},[e("div",{staticClass:"color-list acea-row row-middle"},t._l(t.formValidate.activity,(function(a){return e("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:a,list:t.formValidate.activity,group:"color"},expression:"{\n            item: color,\n            list: formValidate.activity,\n            group: 'color',\n          }"}],key:a,staticClass:"color-item",class:t.activity[a]},[t._v("\n          "+t._s(a)+"\n        ")])})),0),e("div",{staticClass:"tips-info"},[t._v("可拖动按钮调整活动的优先展示顺序")])])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"优品推荐商品："}},[e("div",{staticClass:"picBox"},[t._l(t.formValidate.recommend_list,(function(a,i){return e("div",{key:i,staticClass:"pictrue"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.image,expression:"item.image"}]}),e("i",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"el-icon-error btndel",on:{click:function(e){return t.handleRemoveRecommend(i)}}})])})),e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"upLoad acea-row row-center-wrapper",on:{click:t.changeGoods}},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])],2)])],1),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"line"})]),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"已售数量："}},[e("el-input-number",{staticClass:"input_width input-number-unit-class",attrs:{controls:!1,min:0,max:9999999999,placeholder:"请输入虚拟销量","class-unit":t.formValidate.unit_name||"件"},model:{value:t.formValidate.ficti,callback:function(e){t.$set(t.formValidate,"ficti",e)},expression:"formValidate.ficti"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"排序："}},[e("el-input-number",{staticClass:"input_width",attrs:{controls:!1,min:0,max:9999999999,placeholder:"请输入数字越大越靠前"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1)],1)],1)}),[],!1,null,"9d156d3a",null).exports),{name:"OtherSetting",props:{formValidate:{type:Object,required:!0},customBtn:{type:Number,default:0},paramsType:{type:Number,default:0},paramsTypeList:{type:Array,default:function(){return[]}},protectionList:{type:Array,default:function(){return[]}},CustomList:{type:Array,default:function(){return[]}}},computed:{innerCustomBtn:{get:function(){return this.customBtn},set:function(t){this.$emit("customMessBtn",t)}}},methods:{modalPicTap:function(t,e){this.$emit("modalPicTap",t,e)},changeParamsType:function(t){this.$emit("changeParamsType",t)},deleteRow:function(t){this.$emit("deleteRow",t)},handleAddParams:function(){this.$emit("handleAddParams")},addProtection:function(){this.$emit("addProtection")},delcustom:function(t){this.$emit("delcustom",t)},addcustom:function(){this.$emit("addcustom")}}}),G=(z=(a("42ca"),Object(v.a)(z,(function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品关键字："}},[e("el-input",{staticClass:"content_width",attrs:{placeholder:"请输入商品关键字",maxlength:"100","show-word-limit":""},model:{value:t.formValidate.keyword,callback:function(e){t.$set(t.formValidate,"keyword","string"==typeof e?e.trim():e)},expression:"formValidate.keyword"}}),e("div",{staticClass:"tips-info"},[t._v("PC端的SEO优化以及可以根据关键字进行商品搜索")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品简介："}},[e("el-input",{staticClass:"content_width",attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介",maxlength:"100","show-word-limit":""},model:{value:t.formValidate.store_info,callback:function(e){t.$set(t.formValidate,"store_info","string"==typeof e?e.trim():e)},expression:"formValidate.store_info"}}),e("div",{staticClass:"tips-info"},[t._v("公众号分享商品以及PC端SEO优化使用")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品口令："}},[e("el-input",{staticClass:"content_width",attrs:{placeholder:"请输入商品口令",type:"textarea",rows:3},model:{value:t.formValidate.command_word,callback:function(e){t.$set(t.formValidate,"command_word","string"==typeof e?e.trim():e)},expression:"formValidate.command_word"}}),e("div",{staticClass:"tips-info"},[t._v("将其他平台的商品口令填写保存，移动端进入商品详情的时候自动复制")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品推荐图："}},[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"pictrueBox",on:{click:function(e){return t.modalPicTap("dan","recommend_image")}}},[t.formValidate.recommend_image?e("div",{staticClass:"pictrue"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.recommend_image,expression:"formValidate.recommend_image"}]}),e("el-input",{staticStyle:{display:"none"},model:{value:t.formValidate.recommend_image,callback:function(e){t.$set(t.formValidate,"recommend_image","string"==typeof e?e.trim():e)},expression:"formValidate.recommend_image"}})],1):e("div",{staticClass:"upLoad acea-row row-center-wrapper"},[e("el-input",{staticStyle:{display:"none"},model:{value:t.formValidate.recommend_image,callback:function(e){t.$set(t.formValidate,"recommend_image","string"==typeof e?e.trim():e)},expression:"formValidate.recommend_image"}}),e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})],1),e("div",{staticClass:"tips-info"},[t._v("移动端分类样式2显示的长方形图片，建议比例：5:2")])])])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"商品参数："}},[e("el-select",{staticStyle:{width:"200px","margin-left":"6px","margin-right":"10px"},attrs:{clearable:""},on:{change:t.changeParamsType},model:{value:t.paramsType,callback:function(e){t.paramsType=e},expression:"paramsType"}},t._l(t.paramsTypeList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1),e("div",{staticClass:"specifications"},[t.paramsType||t.formValidate.params_list.length?e("el-table",{ref:"selection",staticClass:"mt15",attrs:{data:t.formValidate.params_list}},[e("el-table-column",{attrs:{label:"参数名称","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.name,callback:function(e){t.$set(a.row,"name",e)},expression:"scope.row.name"}})]}}],null,!1,3360424494)}),e("el-table-column",{attrs:{label:"参数值","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.value,callback:function(e){t.$set(a.row,"value",e)},expression:"scope.row.value"}})]}}],null,!1,4065949250)}),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission mr15",on:{click:function(e){return t.deleteRow(a.$index)}}},[t._v("删除")])]}}],null,!1,1399733944)})],1):t._e(),t.formValidate.params_list.length<8&&t.paramsType?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission mr15 mt20",attrs:{type:"primary"},on:{click:t.handleAddParams}},[t._v("添加参数")]):t._e()],1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"服务保障："}},[t.protectionList.length?e("el-checkbox-group",{model:{value:t.formValidate.protection_list,callback:function(e){t.$set(t.formValidate,"protection_list",e)},expression:"formValidate.protection_list"}},t._l(t.protectionList,(function(a,i){return e("el-checkbox",{key:i,attrs:{label:a.id}},[t._v(t._s(a.title))])})),1):e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.addProtection}},[t._v("添加保障")]),e("div",{staticClass:"tips-info"},[t._v("商品详情中显示的服务保障信息，可多选")])],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"自定义表单："}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,size:"large"},model:{value:t.innerCustomBtn,callback:function(e){t.innerCustomBtn=e},expression:"innerCustomBtn"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),t.customBtn?e("div",{staticClass:"addCustom_content"},t._l(t.formValidate.custom_form,(function(a,i){return e("div",{key:i,staticClass:"custom_box"},[e("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"表单标题"+(i+1),maxlength:"10","show-word-limit":""},model:{value:a.title,callback:function(e){t.$set(a,"title","string"==typeof e?e.trim():e)},expression:"item.title"}}),e("el-select",{staticStyle:{width:"200px","margin-left":"6px","margin-right":"10px"},model:{value:a.label,callback:function(e){t.$set(a,"label",e)},expression:"item.label"}},t._l(t.CustomList,(function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1),e("el-checkbox",{model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"item.status"}},[t._v("必填")]),e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"addfont",on:{click:function(e){return t.delcustom(i)}}},[t._v("删除")])],1)})),0):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.customBtn,expression:"customBtn"}],staticClass:"addCustomBox"},[e("div",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"btn",on:{click:t.addcustom}},[t._v("+ 添加表单")]),e("div",{staticClass:"tips-info"},[t._v("用户下单时需填写的信息，最多可设置10条，设置了自定义表单的商品不能加入购物车")])])],1)],1)],1)}),[],!1,null,"b61a4ab4",null).exports),a("0d3e"));_={name:"ProductAdd",components:{uploadPictures:_.a,freightTemplate:y.a,addAttr:k.a,couponList:V.a,taoBao:w,goodsList:x.default,userLabel:u.a,goodsLabel:b.a,useLabel:h,BasicInfo:j,SpecStock:R,ProductDetail:f,LogisticsSetting:W,PriceCommission:q,MarketingSetting:E,OtherSetting:z},data:function(){return{labelShow:!1,tagShow:!1,dataLabel:[],headTab:[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"物流设置",name:"4"},{tit:"会员价/佣金",name:"5"},{tit:"营销设置",name:"6"},{tit:"其他设置",name:"7"}],virtual:[{tit:"普通商品",id:0,tit2:"物流发货"},{tit:"卡密/网盘",id:1,tit2:"自动发货"},{tit:"优惠券",id:2,tit2:"自动发货"},{tit:"虚拟商品",id:3,tit2:"虚拟发货"}],seletVideo:0,customBtn:0,content:"",contents:"",fileUrl:$.a.apiBaseURL+"/file/upload",fileUrl2:$.a.apiBaseURL+"/file/video_upload",cardUrl:$.a.apiBaseURL+"/file/upload/1",upload_type:"",uploadData:{},header:{},type:0,modals:!1,goods_modals:!1,spinShow:!1,openSubimit:!1,virtualList:[{key:"",value:""}],oneFormBatch:[{pic:"",price:void 0,cost:void 0,ot_price:void 0,stock:void 0,bar_code:"",bar_code_number:"",weight:void 0,volume:void 0,virtual_list:[]}],formDynamic:{attrsName:"",attrsVal:""},disk_type:1,tabIndex:0,tabName:"",formDynamicNameData:[],isBtn:!1,columns2:D,columns3:I,columns:[],columnsInstall:[],columnsInstal2:[],gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},CustomList:P,currentIndex:0,formValidate:{disk_info:"",logistics:["1"],freight:2,postage:0,recommend:[],presale_day:1,presale:!1,is_limit:!1,limit_type:0,limit_num:0,vip_product:!1,custom_form:[],store_name:"",cate_id:[],label_id:[],keyword:"",unit_name:"",store_info:"",image:"",recommend_image:"",slider_image:[],description:"",ficti:0,give_integral:0,sort:0,is_show:1,is_gift:0,gift_price:0,is_hot:0,is_benefit:0,is_best:0,is_new:0,is_good:0,is_postage:0,is_sub:[],recommend_list:[],params_list:[],virtual_type:0,id:0,spec_type:0,is_virtual:0,video_link:"",temp_id:"",attrs:[],items:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",bar_code_number:""}],activity:["默认","秒杀","砍价","拼团"],couponName:[],header:[],selectRule:"",coupon_ids:[],command_word:"",min_qty:1,label_list:[],protection_list:[]},ruleList:[],templateList:[],createBnt:!0,showIput:!1,manyFormValidate:[],oneFormValidate:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",bar_code_number:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}],images:[],imagesTable:"",currentTab:"1",isChoice:"",loading:!1,modalPic:!1,addVirtualModel:!1,template:!1,uploadList:[],treeSelect:[],picTit:"",tableIndex:0,ruleValidate:A,manyBrokerage:void 0,manyBrokerageTwo:void 0,manyVipPrice:void 0,manyVipDiscount:void 0,upload:{videoIng:!1},videoIng:!1,progress:0,stock:0,disk_info:"",videoLink:"",attrs:[],activity:{"默认":"red","秒杀":"blue","砍价":"green","拼团":"yellow"},couponName:[],updateIds:[],updateName:[],couponIds:"",couponNames:[],rakeBack:[{title:"一级返佣(元)",slot:"brokerage",align:"center",width:95},{title:"二级返佣(元)",slot:"brokerage_two",align:"center",width:95}],member:[{title:"会员价",slot:"vip_price",align:"center",width:95},{title:"会员折扣",slot:"vip_proportion",align:"center",width:95}],columnsInstalM:[],moveIndex:"",addValue:"",visible:!1,typeConfig:[],goodsType:[],paramsTypeList:[],paramsType:null,canSel:!0,changeAttrValue:"",tableKey:0,protectionList:[],labelList:[],tileLabelList:[]}},computed:Object(m.a)(Object(m.a)({},Object(g.d)("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:"120px"},labelPosition:function(){return this.isMobile?"top":"right"},labelBottom:function(){return this.isMobile?void 0:"15px"}}),watch:{typeConfig:function(t){t.length?this.goodsType=this.virtual.filter((function(e){return t.includes(e.id+"")})):this.goodsType=this.virtual}},beforeRouteUpdate:function(t,e,a){this.bus.$emit("onTagsViewRefreshRouterView",this.$route.path),a()},created:function(){this.columns=this.columns2.slice(0,8),this.getToken()},mounted:function(){var t=this;return Object(d.a)(Object(c.a)().m((function e(){return Object(c.a)().w((function(e){for(;;)switch(e.n){case 0:if("0"!==t.$route.params.id&&t.$route.params.id)return e.n=1,t.getInfo();e.n=2;break;case 1:e.n=3;break;case 2:"0"===t.$route.params.id?t.getProductCache():t.getproductLabelUseListApi();case 3:t.$route.query.type?(t.modals=!0,t.type=t.$route.query.type):t.type=0,t.goodsCategory(),t.productGetRule(),t.productGetTemplate(),t.paramsGetTemplate(),t.uploadType(),t.productConfig(),t.watchActivity(),t.getProtectionList();case 4:return e.a(2)}}),e)})))()},methods:{getProductCache:function(){var t=this;Object(p.x)().then((function(e){var a,i;e=e.data.info;t.getproductLabelUseListApi(),Array.isArray(e)||(a=e.cate_id.map(Number),e.label_id.map(Number),t.attrs=e.items||[],i=[],e.coupons&&(e.coupons.map((function(t){i.push(t.id)})),t.couponName=e.coupons),t.formValidate=e,t.dataLabel=e.label_id,t.formValidate.coupon_ids=i,t.updateIds=i,t.updateName=e.coupons,t.formValidate.cate_id=a,t.oneFormValidate=e.attrs,t.generateHeader(t.attrs),t.formValidate.logistics=e.logistics||["1"],t.formValidate.header=[],t.manyFormValidate=e.attrs,t.spec_type=e.spec_type,t.formValidate.is_virtual=e.is_virtual,t.formValidate.custom_form=e.custom_form||[],0!=t.formValidate.custom_form.length&&(t.customBtn=1),t.attrs.map((function(e){e.add_pic&&(t.canSel=!1)})),t.virtualbtn(e.virtual_type,1),0===e.spec_type?t.manyFormValidate=[]:(t.createBnt=!0,t.oneFormValidate=[{pic:e.image,price:0,cost:0,ot_price:0,stock:0,bar_code:"",bar_code_number:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}]),t.watchActivity(),t.spinShow=!1)})).catch((function(e){t.$message.error(e.msg)}))},getProtectionList:function(){var t=this;Object(p.L)({page:0,limit:0,status:1}).then((function(e){t.protectionList=e.data.list}))},getproductLabelUseListApi:function(){var t=this;Object(p.I)().then((function(e){t.tileLabelList=e.data.flatMap((function(t){return t.list}));var a=e.data;t.formValidate.label_list.length?t.formValidate.label_list.map((function(t){a.map((function(e){e.list.map((function(e){e.id===t?e.active=!0:e.active=!1}))}))})):a.map((function(t){t.list.map((function(t){t.active=!1}))})),t.labelList=a}))},addProtection:function(){this.$router.push({path:this.$routeProStr+"/product/protection/list"})},productConfig:function(){var t=this;Object(p.l)().then((function(e){t.typeConfig=e.data}))},beforeUpload:function(t){return Object(T.b)(t)},videoSaveToUrl:function(t){var e=this;return Object(T.d)(t)&&Object(S.a)({file:t,pieceSize:3,success:function(t){e.formValidate.video_link=t.file_path,e.progress=100},error:function(t){e.$message.error(t.msg)},uploading:function(t,a){e.videoIng=!0,t=Math.floor(t/a*100),e.progress=t}}),!1},virtualbtn:function(t,e){var a=this;if(1!=e){if(this.$route.params.id)return this.$message.error("编辑商品不支持切换商品类型");this.formValidate.is_sub=[],e=this.$route.params.id,e?Object(p.f)(e).then((function(t){})).catch((function(t){a.formValidate.spec_type=a.spec_type,a.$message.error(t.msg)})):1==this.formValidate.spec_type&&this.generate(1)}var i=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"会员价/佣金",name:"4"},{tit:"营销设置",name:"5"},{tit:"其他设置",name:"6"}];switch(t){case 0:this.formValidate.virtual_type=0,this.formValidate.is_virtual=0,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"物流设置",name:"4"},{tit:"会员价/佣金",name:"5"},{tit:"营销设置",name:"6"},{tit:"其他设置",name:"7"}];break;case 1:this.formValidate.virtual_type=1,this.formValidate.postage=0,this.formValidate.is_virtual=1,this.headTab=i;break;case 2:this.formValidate.virtual_type=2,this.formValidate.is_virtual=1,this.headTab=i;break;case 3:this.formValidate.virtual_type=3,this.formValidate.is_virtual=1,this.headTab=i}},addCate:function(){var t=this;this.$modalForm(Object(p.y)()).then((function(){return t.goodsCategory()}))},logisticsBtn:function(t){this.formValidate.logistics=t},addLabel:function(){var t=this;this.$modalForm(Object(C.M)(0)).then((function(){return t.userLabel()}))},addGoodsTag:function(){this.tagShow=!0},customMessBtn:function(t){t||(this.formValidate.custom_form=[]),this.customBtn=t},addcustom:function(){9<this.formValidate.custom_form.length?this.$message.warning("最多添加10条"):this.formValidate.custom_form.push({title:"",label:"text",value:"",status:!1})},delcustom:function(t){this.formValidate.custom_form.splice(t,1)},onchangeTime:function(t){this.formValidate.presale_time=t},getEditorContent:function(t){this.content=t},cancel:function(){this.modals=!1},getToken:function(){this.header["Authori-zation"]="Bearer "+Object(F.c)("token")},upFile:function(t){var e=this;Object(p.m)({file:t.data.src}).then((function(t){e.virtualList=e.virtualList.concat(t.data)}))},uploadType:function(){var t=this;Object(p.Z)().then((function(e){t.upload_type=e.data.upload_type}))},infoData:function(t,e){var a=this,i=t.cate_id.map(Number),n=(t.label_id.map(Number),this.attrs=t.items||[],[]);t.coupons.map((function(t){n.push(t.id)})),this.formValidate=t,this.seletVideo=t.seletVideo,this.contents=t.description,this.couponName=t.coupons,this.formValidate.coupon_ids=n,this.updateIds=n,this.dataLabel=t.label_id,this.updateName=t.coupons,this.virtualbtn(t.virtual_type,1),this.formValidate.logistics=t.logistics||["1"],this.formValidate.custom_form=t.custom_form||[],0!=this.formValidate.custom_form.length&&(this.customBtn=1),this.formValidate.cate_id=i,t.attr&&(this.oneFormValidate=[t.attr],this.oneFormValidate[0].vip_proportion=(this.oneFormValidate[0].vip_price/this.oneFormValidate[0].price*100).toFixed(2)),this.getproductLabelUseListApi(),this.formValidate.header=[],this.spec_type=t.spec_type,this.formValidate.spec_type=this.spec_type,this.formValidate.is_virtual=t.is_virtual,this.attrs.map((function(t){t.add_pic&&(a.canSel=!1)})),0===t.spec_type?this.manyFormValidate=[]:(this.createBnt=!0,this.oneFormValidate=[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",bar_code_number:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}],this.generateHeader(this.attrs),this.manyFormValidate=[].concat(Object(s.a)(this.oneFormBatch),Object(s.a)(t.attrs))),setTimeout((function(e){a.checkAllGroup(t.is_sub)}),1e3),this.watchActivity()},onClose:function(t){this.modals=!1,this.infoData(t,1)},checkMove:function(t){this.moveIndex=t.draggedContext.index},end:function(){this.moveIndex="",this.generate(1)},checkAllGroupChange:function(t){this.checkAllGroup(t)},checkAllGroup:function(t){var e=this.attrs.length+3;0===this.formValidate.spec_type?2===t.length?this.columnsInstall=this.columns2.slice(0,e).concat(this.rakeBack).concat(this.member):-1<t.indexOf(0)?this.columnsInstall=this.columns2.slice(0,e).concat(this.member):-1<t.indexOf(1)?this.columnsInstall=this.columns2.slice(0,e).concat(this.rakeBack):this.columnsInstall=this.columns2.slice(0,e):2===t.length?this.columnsInstal2=this.columnsInstalM.slice(0,e+1).concat(this.rakeBack).concat(this.member):-1<t.indexOf(0)?this.columnsInstal2=this.columnsInstalM.slice(0,e).concat(this.member):-1<t.indexOf(1)?this.columnsInstal2=this.columnsInstalM.slice(0,e).concat(this.rakeBack):this.columnsInstal2=this.columnsInstalM.slice(0,e)},addCoupon:function(){this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},see:function(t,e,a){this.tabName=e,this.tabIndex=a,1===this.formValidate.virtual_type?(""!=t.disk_info?(this.disk_type=1,this.disk_info=t.disk_info,this.stock=t.stock):t.virtual_list.length&&(this.disk_type=2,this.virtualList=t.virtual_list),this.addVirtualModel=!0):(this.$refs.goodsCoupon.isTemplate=!0,this.$refs.goodsCoupon.tableList(3))},changeDiscount:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"manyFormValidate";this[e][t].vip_price=(this[e][t].price*(this[e][t].vip_proportion/100)).toFixed(2)},changeVipPrice:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"manyFormValidate";this[e][t].vip_proportion=(this[e][t].vip_price/this[e][t].price*100).toFixed(2)},addGoodsCoupon:function(t,e){this.tabIndex=t,this.tabName=e,this.$refs.goodsCoupon.isTemplate=!0,this.$refs.goodsCoupon.tableList(3)},addVirtual:function(t,e){this.tabIndex=t,this.tabName=e,this.addVirtualModel=!0},upVirtual:function(){if(2==this.disk_type){for(var t=0;t<this.virtualList.length;t++)if(!this.virtualList[t].value)return void this.$message.error("请输入所有卡密");this.$set(this[this.tabName][this.tabIndex],"virtual_list",this.virtualList),this.$set(this[this.tabName][this.tabIndex],"stock",this.virtualList.length),this.virtualList=[{key:"",value:""}],this.$set(this[this.tabName][this.tabIndex],"disk_info","")}else{if(!this.disk_info.length)return this.$message.error("请填写卡密信息");if(!this.stock)return this.$message.error("请填写库存数量");this.$set(this[this.tabName][this.tabIndex],"stock",Number(this.stock)),this.$set(this[this.tabName][this.tabIndex],"stock",Number(this.stock)),this.$set(this[this.tabName][this.tabIndex],"disk_info",this.disk_info),this.$set(this[this.tabName][this.tabIndex],"virtual_list",[])}this.addVirtualModel=!1,this.closeVirtual()},closeVirtual:function(){this.addVirtualModel=!1,this.virtualList=[{key:"",value:""}],this.disk_info="",this.stock=0},uniqueArray:function(t){var e={};return t.filter((function(t){return t=JSON.stringify(t),!e[t]&&(e[t]=!0)}))},nameId:function(t,e){this.formValidate.coupon_ids=t,this.couponName=this.uniqueArray(e)},goodsCouponId:function(t){this.$set(this[this.tabName][this.tabIndex],"coupon_id",t.id),this.$set(this[this.tabName][this.tabIndex],"coupon_name",t.title),this.$refs.goodsCoupon.isTemplate=!1},handleClose:function(t){t=this.couponName.indexOf(t);var e=(this.couponName.splice(t,1),this.formValidate.coupon_ids);e.splice(t,1),this.updateIds=e,this.updateName=this.couponName},addTemp:function(){this.$refs.templates.isTemplate=!0},addVideo:function(){var t=this;this.$videoModal((function(e){t.formValidate.video_link=e}))},delVideo:function(){this.$set(this.formValidate,"video_link",""),this.$set(this,"progress",0),this.videoIng=!1,this.upload.videoIng=!1},zh_uploadFile:function(){1==this.seletVideo?this.formValidate.video_link=this.videoLink:this.$refs.refid.click()},zh_uploadFile_change:function(t){var e=this;if(-1===t.target.files[0].name.substr(t.target.files[0].name.indexOf(".")).indexOf(".mp4"))return this.$message.error("只能上传MP4文件");var a={key:t.target.files[0].name,contentType:t.target.files[0].type};Object(p.B)(a).then((function(a){e.$videoCloud.videoUpload({type:a.data.type,evfile:t,res:a,uploading:function(t,e){this.upload.videoIng=t,200==a.status&&(this.progress=100)}}).then((function(t){e.formValidate.video_link=t.url,e.$message.success("视频上传成功"),e.upload.videoIng=!1})).catch((function(t){e.$message.error(t)}))})).catch((function(t){e.$message.error(t.msg)}))},upTab:function(){this.currentTab=(Number(this.currentTab)-1).toString()},downTab:function(){this.currentTab=(Number(this.currentTab)+1).toString()},userSearchs:function(){this.productGetRule()},addRule:function(){this.$refs.addattr.modal=!0},brokerageSetUp:function(){if(-1<this.formValidate.is_sub.indexOf(1)){if(this.manyBrokerage<=0||this.manyBrokerageTwo<=0)return this.$message.error("请填写返佣金额后进行批量添加")}else if(-1<this.formValidate.is_sub.indexOf(0)&&this.manyVipPrice<=0)return this.$message.error("请填写会员价后进行批量添加");if(2===this.formValidate.is_sub.length){if(this.manyBrokerage<=0||this.manyBrokerageTwo<=0)return this.$message.error("请填写完金额后进行批量添加");if(0<this.manyVipPrice&&0<this.manyVipDiscount)return this.$message.error("会员价和会员折扣只能二选一添加")}var t,e=l(this.manyFormValidate);try{for(e.s();!(t=e.n()).done;){var a=t.value;null!=this.manyBrokerage&&this.$set(a,"brokerage",this.manyBrokerage),null!=this.manyBrokerageTwo&&this.$set(a,"brokerage_two",this.manyBrokerageTwo),null!=this.manyVipPrice?(this.$set(a,"vip_price",this.manyVipPrice),this.$set(a,"vip_proportion",(a.vip_price/a.price*100).toFixed(2))):(this.$set(a,"vip_proportion",this.manyVipDiscount),this.$set(a,"vip_price",(a.price*(this.manyVipDiscount/100)).toFixed(2)))}}catch(t){e.e(t)}finally{e.f()}},vipPriceSetUp:function(){if(this.manyVipPrice<=0)return this.$message.error("请填写会员价在进行批量添加");var t,e=l(this.manyFormValidate);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.$set(a,"vip_price",this.manyVipPrice)}}catch(t){e.e(t)}finally{e.f()}},handleAdd:function(){this.virtualList.push({key:"",value:""})},initVirtualData:function(t){this.virtualList=[{key:"",value:""}]},removeVirtual:function(t){this.virtualList.splice(t,1)},batchDel:function(){this.oneFormBatch=[{pic:"",price:void 0,cost:void 0,ot_price:void 0,stock:void 0,bar_code:"",bar_code_number:"",weight:void 0,volume:void 0,virtual_list:[]}]},confirm:function(t){var e=this;if(this.createBnt=!0,this.formValidate.selectRule=t,this.attrs=[],this.formValidate.selectRule.trim().length<=0)return this.$message.error("请选择属性");this.ruleList.forEach((function(t,a){t.rule_name===e.formValidate.selectRule&&(e.attrs=Object(s.a)(t.rule_value))})),this.canSel=!0,this.generateAttr(this.attrs)},handleCommand:function(t){},productGetRule:function(){var t=this;Object(p.A)().then((function(e){t.ruleList=e.data}))},productGetTemplate:function(){var t=this;Object(p.C)().then((function(e){t.templateList=e.data}))},paramsGetTemplate:function(){var t=this;Object(p.s)().then((function(e){t.paramsTypeList=e.data.list}))},changeParamsType:function(t){t?this.getParams(t):this.formValidate.params_list=[]},getParams:function(t){var e=this;Object(p.r)(t).then((function(t){e.formValidate.params_list=t.data.value}))},isSubset:function(t,e){var a,i=new Set(t),n=l(new Set(e));try{for(n.s();!(a=n.n()).done;){var o=a.value;if(!i.has(o))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},batchAdd:function(){var t,e=this,a=[],i=l(this.attrs);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.oneFormBatch[0][n.value]&&a.push(this.oneFormBatch[0][n.value])}}catch(t){i.e(t)}finally{i.f()}var o,r=["pic","price","cost","ot_price","stock","weight","volume","bar_code","bar_code_number"],s=l(this.manyFormValidate);try{for(s.s();!(o=s.n()).done;)(()=>{var t=o.value,i=e.oneFormBatch[0];a.length&&!e.isSubset(t.attr_arr,a)||r.forEach((function(a){i[a]&&void 0!==i[a]&&("pic"===a&&i[a]||"pic"!=a)&&e.$set(t,a,i[a])}))})()}catch(t){s.e(t)}finally{s.f()}},changeSpecImg:function(t,e){for(var a=this,i=!1,n=1;n<this.manyFormValidate.length;n++){var o=this.manyFormValidate[n];if(o.pic&&this.isSubset(o.attr_arr,t)){i=!0;break}}if(i)this.$confirm("可以同步修改下方该规格图片，确定要替换吗？","提示",{confirmButtonText:"替换",cancelButtonText:"暂不",type:"warning"}).then((function(){var i,n=l(a.manyFormValidate);try{for(n.s();!(i=n.n()).done;){var o=i.value;a.isSubset(o.attr_arr,t)&&a.$set(o,"pic",e)}}catch(i){n.e(i)}finally{n.f()}})).catch((function(){}));else{var r,s=l(this.manyFormValidate);try{for(s.s();!(r=s.n()).done;){var c=r.value;this.isSubset(c.attr_arr,t)&&this.$set(c,"pic",e)}}catch(i){s.e(i)}finally{s.f()}}},generate:function(t,e,a){this.manyFormValidate=[],this.formValidate.header=[]},clearAttr:function(){this.formDynamic.attrsName="",this.formDynamic.attrsVal=""},handleRemoveRole:function(t){this.attrs.splice(t,1),this.manyFormValidate.splice(t,1),this.attrs.length?this.generateAttr(this.attrs):(this.formValidate.header=[],this.manyFormValidate=[])},delAttrTable:function(t){for(var e=0;e<this.manyFormValidate.length;e++){var a=this.manyFormValidate[e];a.attr_arr&&a.attr_arr.includes(t)&&(this.manyFormValidate.splice(e,1),e--)}},handleRemove2:function(t,e,a){t.splice(e,1),this.delAttrTable(a)},handleAddRole:function(){var t={value:this.formDynamic.attrsName,add_pic:0,detail:[]};this.attrs.push(t)},handleAddParams:function(){this.formValidate.params_list.push({name:"",value:""})},handleSaveAsTemplate:function(){var t=this;this.$prompt("","请输入模板名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){e={rule_name:e.value,spec:t.attrs.map((function(t){return{value:t.value,detail:t.detail.map((function(t){return t.value}))}}))},Object(p.S)(e,0).then((function(e){t.$message.success(e.msg),t.productGetRule()})).catch((function(e){t.$message.error(e.msg)}))})).catch((function(){}))},addOneAttr:function(t,e){this.generateAttr(this.attrs,e)},handleFocus:function(t){this.changeAttrValue=t},handleBlur:function(){this.changeAttrValue=""},handleSelImg:function(t){var e=this;this.$imgModal((function(a){t.pic=a.att_dir,e.changeSpecImg([t.value],a.att_dir)}))},handleRemoveImg:function(t){t.pic=""},attrChangeValue:function(t,e){var a=this;e.trim().length&&this.attrs[t].detail.length?(this.generateHeader(this.attrs),this.manyFormValidate.length&&(this.manyFormValidate.map((function(t,i){0<i&&Object.keys(t.detail).includes(a.changeAttrValue)&&(t.detail[e]=t.detail[a.changeAttrValue],t[e]=t[a.changeAttrValue],delete t.detail[a.changeAttrValue],delete t[a.changeAttrValue])})),this.changeAttrValue=e)):this.generateAttr(this.attrs)},attrDetailChangeValue:function(t,e){var a,i=this;this.manyFormValidate.length?(a=this.attrs[e].value,this.manyFormValidate.map((function(e,n){0<n&&Object.keys(e.detail).includes(a)&&e.detail[a]===i.changeAttrValue&&(e.detail[a]=t,n=e.attr_arr.findIndex((function(t){return t===i.changeAttrValue})),e.attr_arr[n]=t)})),this.changeAttrValue=t):this.generateAttr(this.attrs,1)},addPic:function(t,e){var a=this;t?(this.attrs.map((function(t,i){i!==e&&a.$set(t,"add_pic",0)})),this.canSel=!1):this.canSel=!0},onMoveSpec:function(){this.generateAttr(this.attrs)},changeCurrentIndex:function(t){this.currentIndex=t},generateHeader:function(t){var e,a=this;t=t.map((function(t){return{title:t.value,key:t.value,minWidth:140,fixed:"left"}}));[1,2].includes(Number(this.formValidate.virtual_type))?(e=[].concat(Object(s.a)(t),Object(s.a)(N)),this.formValidate.header.map((function(t){"fictitious"===t.slot&&(t.title=1==a.formValidate.virtual_type?"添加卡密/网盘":"选择优惠券")}))):e=3==this.formValidate.virtual_type?[].concat(Object(s.a)(t),Object(s.a)(L)):[].concat(Object(s.a)(t),Object(s.a)(O)),this.$set(this.formValidate,"header",e),this.tableKey+=1,this.columnsInstalM=e},generateAttr:function(t,e){var a=this,i=(this.generateHeader(t),this.generateCombinations(t)),n=(this.formValidate.virtual_type,[]);if(500<i.length)for(var o=Math.ceil(i.length/500),r=0;r<i.length;r+=o)(r=>{setTimeout((function(l){var c=a.generateAttrBatch(t,i.slice(r,r+o),e);n=[].concat(Object(s.a)(n),Object(s.a)(c)),a.manyFormValidate=[].concat(Object(s.a)(a.oneFormBatch),Object(s.a)(n))}),0)})(r);else n=this.generateAttrBatch(t,i,e),this.manyFormValidate=[].concat(Object(s.a)(this.oneFormBatch),Object(s.a)(n))},generateAttrBatch:function(t,e,a){var i=this,n=this.manyFormValidate.slice(1);return e.map((function(e){var o={attr_arr:e,detail:{},title:"",key:"",price:0,pic:"",ot_price:0,cost:0,stock:0,is_show:1,is_default_select:0,unique:"",weight:"",volume:"",brokerage:0,brokerage_two:0,vip_price:0,vip_proportion:0};return 1===i.formValidate.virtual_type?(o.virtual_list=[],o.disk_info=""):2===i.formValidate.virtual_type&&(o.coupon_id=0,o.coupon_name=""),t.forEach((function(t,l){l=e[l],o[t.value]=l,o.title=t.value,o.key=t.value,o.detail[t.value]=l,l=n.find((function(t){return t.attr_arr&&Object(T.a)(t.attr_arr,e)}));l?(Object.assign(o,Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({price:l.price,cost:l.cost,ot_price:l.ot_price,stock:l.stock,pic:l.pic,unique:l.unique||"",weight:l.weight||"",volume:l.volume||"",is_show:l.is_show||1,is_default_select:l.is_default_select||0},"volume",l.volume||0),"bar_code_number",l.bar_code_number||0),"is_virtual",l.is_virtual),"brokerage",l.brokerage),"brokerage_two",l.brokerage_two),"vip_price",l.vip_price),"vip_proportion",l.vip_proportion)),1===i.formValidate.virtual_type?(o.virtual_list=l.virtual_list,o.disk_info=l.disk_info):2===i.formValidate.virtual_type&&l.coupon_id&&(o.coupon_id=l.coupon_id,o.coupon_name=l.coupon_name)):t.add_pic&&e.includes(a)&&(l=t.detail.find((function(t){return e.includes(t.value)})))&&(o.pic=l.pic)})),o}))},changeDefaultSelect:function(t,e){this.manyFormValidate.map((function(t,a){a!==e&&(t.is_default_select=0)})),t&&(this.manyFormValidate[e].is_show=1)},changeDefaultShow:function(t){1===this.manyFormValidate[t].is_default_select&&(this.manyFormValidate[t].is_show=1,this.$message.error("默认规格不可隐藏"))},generateCombinations:function(t){var e,a,i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return 0===t.length?[n]:(e=(t=o(t))[0],a=t.slice(1),e.detail.flatMap((function(t){return i.generateCombinations(a,[].concat(Object(s.a)(n),[t.value]))})))},createAttr:function(t,e){var a=this;t?this.attrs[e].detail.some((function(e){return e.value===t}))?this.$message.error("规格值已存在"):(this.attrs[e].detail.push({value:t,pic:""}),this.manyFormValidate.length?this.addOneAttr(this.attrs[e].value,t):this.generateAttr(this.attrs),this.$refs.specStock.$refs["popoverRef_"+e][0].doClose(),this.clearAttr(),setTimeout((function(){a.$refs.specStock.$refs["popoverRef_"+e]&&a.$refs.specStock.$refs["popoverRef_"+e][0].doShow()}),20)):this.$refs.specStock.$refs["popoverRef_"+e][0].doClose()},handleShowPop:function(t){this.$refs.specStock.$refs["inputRef_"+t][0].focus()},goodsCategory:function(){var t=this;Object(p.d)(1).then((function(e){t.treeSelect=e.data})).catch((function(e){t.$message.error(e.msg)}))},changeSpec:function(){var t=this,e=(this.formValidate.is_sub=[],this.$route.params.id);e&&Object(p.f)(e).then((function(t){})).catch((function(e){t.formValidate.spec_type=t.spec_type,t.$message.error(e.msg)}))},getInfo:function(){var t=this;this.spinShow=!0,Object(p.D)(this.$route.params.id).then((()=>{var e=Object(d.a)(Object(c.a)().m((function e(a){var i;return Object(c.a)().w((function(e){for(;;)switch(e.n){case 0:i=a.data.productInfo,t.infoData(i),t.spinShow=!1;case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}})()).catch((function(e){t.spinShow=!1,t.$message.error(e.msg)}))},handleRemove:function(t){this.images.splice(t,1),this.formValidate.slider_image.splice(t,1),this.oneFormValidate[0].pic=this.formValidate.slider_image[0]},changeCancel:function(t){this.modalPic=!1},modalPicTap:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e,this.tableIndex=a},getPic:function(t){switch(this.picTit){case"danFrom":this.formValidate.image=t.att_dir,this.$route.params.id||(0===this.formValidate.spec_type?this.oneFormValidate[0].pic=t.att_dir:(this.manyFormValidate.map((function(e){e.pic=t.att_dir})),this.oneFormBatch[0].pic=t.att_dir));break;case"danTable":this.oneFormValidate[this.tableIndex].pic=t.att_dir;break;case"duopi":this.oneFormBatch[this.tableIndex].pic=t.att_dir;break;case"recommend_image":this.formValidate.recommend_image=t.att_dir;break;default:this.manyFormValidate.length&&(this.manyFormValidate[this.tableIndex].pic=t.att_dir)}this.modalPic=!1},deleteRow:function(t){this.formValidate.params_list.splice(t,1)},getPicD:function(t){var e=this;this.images=t,this.images.map((function(t){e.formValidate.slider_image.push(t.att_dir),e.formValidate.slider_image=e.formValidate.slider_image.splice(0,10)})),this.oneFormValidate[0].pic=this.formValidate.slider_image[0],this.modalPic=!1},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.formValidate.store_name?e.formValidate.cate_id.length?e.formValidate.unit_name?e.formValidate.slider_image.length?e.formValidate.logistics.length||e.formValidate.virtual_type?e.formValidate.temp_id||3!=e.formValidate.freight?void 0:e.$message.warning("商品信息-运费模板不能为空"):e.$message.warning("物流设置-至少选择一种物流方式"):e.$message.warning("商品信息-商品轮播图不能为空"):e.$message.warning("商品信息-商品单位不能为空"):e.$message.warning("商品信息-商品分类不能为空"):e.$message.warning("商品信息-商品名称不能为空");e.formValidate.type=e.type;t=0===e.formValidate.spec_type?e.oneFormValidate:e.manyFormValidate;var a=JSON.parse(JSON.stringify(t));if(1===e.formValidate.spec_type){if(a.length<2)return e.$message.warning("商品规格-规格数量最少1个");a.shift()}for(var i=0;i<a.length;i++)if(1e6<a[i].stock)return e.$message.error("规格库存-库存超出系统范围(1000000)");if(1===e.formValidate.is_sub[0]){for(var n=0;n<a.length;n++)if(null===a[n].brokerage||null===a[n].brokerage_two)return e.$message.error("营销设置- 一二级返佣不能为空")}else for(var o=0;o<a.length;o++)if(null===a[o].vip_price)return e.$message.error("营销设置-会员价不能为空");if(2===e.formValidate.is_sub.length)for(var r=0;r<a.length;r++)if(null===a[r].brokerage||null===a[r].brokerage_two||null===a[r].vip_price)return e.$message.error("营销设置- 一二级返佣和会员价不能为空");if(3==e.formValidate.freight&&!e.formValidate.temp_id)return e.$message.warning("商品信息-运费模板不能为空");var l=[];e.dataLabel.forEach((function(t){l.push(t.id)})),e.formValidate.label_id=l,e.openSubimit||(e.openSubimit=!0,e.formValidate.description=Object(G.a)(e.content),0===e.formValidate.spec_type?(e.formValidate.attrs=a,e.formValidate.header=[],e.formValidate.items=[],e.formValidate.is_copy=0):(e.formValidate.items=e.attrs,e.formValidate.attrs=a,e.formValidate.is_copy=1),Object(p.u)(e.formValidate).then((()=>{var t=Object(d.a)(Object(c.a)().m((function t(a){return Object(c.a)().w((function(t){for(;;)switch(t.n){case 0:e.openSubimit=!1,e.$message.success(a.msg),"0"===e.$route.params.id&&Object(p.c)().catch((function(t){e.$message.error(t.msg)})),setTimeout((function(){e.openSubimit=!1,e.$router.push({path:e.$routeProStr+"/product/product_list"})}),500);case 1:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}})()).catch((function(t){setTimeout((function(t){e.openSubimit=!1}),1e3),e.$message.error(t.msg)})))}))},changeTemplate:function(t){this.template=t},validate:function(t,e,a){!1===e&&this.$message.warning(a)},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){var a;t.dataTransfer.effectAllowed="move",e!==this.dragging&&(a=(t=Object(s.a)(this.formValidate.slider_image)).indexOf(this.dragging),e=t.indexOf(e),t.splice.apply(t,[e,0].concat(Object(s.a)(t.splice(a,1)))),this.formValidate.slider_image=t)},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.product_id)&&e.set(t.product_id,1)}))},getProductId:function(t){this.goods_modals=!1,this.formValidate.recommend_list=this.unique(this.formValidate.recommend_list.concat(t))},changeGoods:function(){this.goods_modals=!0,this.$refs.goodslist.getList(),this.$refs.goodslist.goodsCategory()},activeData:function(t){this.labelShow=!1,this.dataLabel=t},activeLabel:function(t){this.tagShow=!1,this.formValidate.label_list=Array.from(new Set(t))},labelClose:function(){this.labelShow=!1,this.tagShow=!1},closeLabel:function(t){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1)},openLabel:function(t){this.labelShow=!0},handleRemoveRecommend:function(t){this.formValidate.recommend_list.splice(t,1)},watchActivity:function(){var t=[],e={"默认":!0,"秒杀":"seckill","砍价":"bargain","拼团":"combination"};this.formValidate.activity.forEach((function(a){var i;(!0===e[a]||e[a]&&(i=e[a],-1<(B.a.get("PERMISSIONS")||["seckill","bargain","combination"]).indexOf(i)))&&t.push(a)})),this.formValidate.activity=t}}},a("6320"),y=Object(v.a)(_,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.spinShow,expression:"spinShow"}],attrs:{id:"shopp-manager"}},[e("pages-header",{ref:"pageHeader",attrs:{title:t.$route.params.id?"编辑商品":"添加商品",backUrl:t.$routeProStr+"/product/product_list"}}),e("el-card",{staticClass:"mt16",attrs:{bordered:!1,shadow:"never","body-style":{padding:"0px 20px"}}},[e("el-tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.headTab,(function(t,a){return e("el-tab-pane",{key:a,attrs:{label:t.tit,name:t.name}})})),1),e("el-form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[e("basic-info",{directives:[{name:"show",rawName:"v-show",value:"1"===t.currentTab,expression:"currentTab === '1'"}],attrs:{isCai:t.type,formValidate:t.formValidate,goodsType:t.goodsType,treeSelect:t.treeSelect,tileLabelList:t.tileLabelList,progress:t.progress,upload:t.upload,videoIng:t.videoIng},on:{virtualbtn:t.virtualbtn,handleDragStart:t.handleDragStart,handleDragOver:t.handleDragOver,handleDragEnter:t.handleDragEnter,handleDragEnd:t.handleDragEnd,handleRemove:t.handleRemove,modalPicTap:t.modalPicTap,addVideo:t.addVideo,delVideo:t.delVideo,addCate:t.addCate,addGoodsTag:t.addGoodsTag}}),e("spec-stock",{directives:[{name:"show",rawName:"v-show",value:"2"===t.currentTab,expression:"currentTab === '2'"}],ref:"specStock",attrs:{formValidate:t.formValidate,ruleList:t.ruleList,attrs:t.attrs,manyFormValidate:t.manyFormValidate,oneFormValidate:t.oneFormValidate,tableKey:t.tableKey,oneFormBatch:t.oneFormBatch,formDynamic:t.formDynamic,canSel:t.canSel},on:{changeSpec:t.changeSpec,confirm:t.confirm,onMoveSpec:t.onMoveSpec,changeCurrentIndex:t.changeCurrentIndex,handleRemoveRole:t.handleRemoveRole,attrChangeValue:t.attrChangeValue,handleFocus:t.handleFocus,addPic:t.addPic,handleRemove2:t.handleRemove2,attrDetailChangeValue:t.attrDetailChangeValue,handleBlur:t.handleBlur,handleSelImg:t.handleSelImg,handleRemoveImg:t.handleRemoveImg,handleShowPop:t.handleShowPop,createAttr:t.createAttr,handleAddRole:t.handleAddRole,handleSaveAsTemplate:t.handleSaveAsTemplate,batchAdd:t.batchAdd,batchDel:t.batchDel,modalPicTap:t.modalPicTap,changeDefaultSelect:t.changeDefaultSelect,changeDefaultShow:t.changeDefaultShow,addGoodsCoupon:t.addGoodsCoupon,see:t.see,addVirtual:t.addVirtual}}),e("product-detail",{directives:[{name:"show",rawName:"v-show",value:"3"===t.currentTab,expression:"currentTab === '3'"}],attrs:{contents:t.contents,content:t.content},on:{getEditorContent:t.getEditorContent}}),e("logistics-setting",{directives:[{name:"show",rawName:"v-show",value:7===t.headTab.length&&"4"===t.currentTab,expression:"headTab.length === 7 ? currentTab === '4' : false"}],attrs:{formValidate:t.formValidate,templateList:t.templateList},on:{logisticsBtn:t.logisticsBtn,addTemp:t.addTemp}}),e("price-commission",{directives:[{name:"show",rawName:"v-show",value:7===t.headTab.length?"5"===t.currentTab:"4"===t.currentTab,expression:"headTab.length === 7 ? currentTab === '5' : currentTab === '4'"}],attrs:{formValidate:t.formValidate,oneFormValidate:t.oneFormValidate,manyFormValidate:t.manyFormValidate,columnsInstall:t.columnsInstall,columnsInstal2:t.columnsInstal2,manyBrokerage:t.manyBrokerage,manyBrokerageTwo:t.manyBrokerageTwo,manyVipPrice:t.manyVipPrice,manyVipDiscount:t.manyVipDiscount},on:{"update:manyBrokerage":function(e){t.manyBrokerage=e},"update:many-brokerage":function(e){t.manyBrokerage=e},"update:manyBrokerageTwo":function(e){t.manyBrokerageTwo=e},"update:many-brokerage-two":function(e){t.manyBrokerageTwo=e},"update:manyVipPrice":function(e){t.manyVipPrice=e},"update:many-vip-price":function(e){t.manyVipPrice=e},"update:manyVipDiscount":function(e){t.manyVipDiscount=e},"update:many-vip-discount":function(e){t.manyVipDiscount=e},checkAllGroupChange:t.checkAllGroupChange,changeVipPrice:t.changeVipPrice,changeDiscount:t.changeDiscount,brokerageSetUp:t.brokerageSetUp}}),e("marketing-setting",{directives:[{name:"show",rawName:"v-show",value:7===t.headTab.length?"6"===t.currentTab:"5"===t.currentTab,expression:"headTab.length === 7 ? currentTab === '6' : currentTab === '5'"}],attrs:{formValidate:t.formValidate,couponName:t.couponName,dataLabel:t.dataLabel,activity:t.activity},on:{handleClose:t.handleClose,addCoupon:t.addCoupon,openLabel:t.openLabel,closeLabel:t.closeLabel,addLabel:t.addLabel,onchangeTime:t.onchangeTime,handleRemoveRecommend:t.handleRemoveRecommend,changeGoods:t.changeGoods}}),e("other-setting",{directives:[{name:"show",rawName:"v-show",value:7===t.headTab.length?"7"===t.currentTab:"6"===t.currentTab,expression:"headTab.length === 7 ? currentTab === '7' : currentTab === '6'"}],attrs:{formValidate:t.formValidate,customBtn:t.customBtn,paramsType:t.paramsType,paramsTypeList:t.paramsTypeList,protectionList:t.protectionList,CustomList:t.CustomList},on:{"update:customBtn":function(e){t.customBtn=e},"update:custom-btn":function(e){t.customBtn=e},modalPicTap:t.modalPicTap,changeParamsType:t.changeParamsType,deleteRow:t.deleteRow,handleAddParams:t.handleAddParams,addProtection:t.addProtection,customMessBtn:t.customMessBtn,delcustom:t.delcustom,addcustom:t.addcustom}}),e("el-form-item",["1"!==t.currentTab?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.upTab}},[t._v("上一步")]):t._e(),"7"!==t.currentTab&&0==t.formValidate.virtual_type?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission",on:{click:t.downTab}},[t._v("下一步")]):t._e(),"6"!==t.currentTab&&0!=t.formValidate.virtual_type?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission",on:{click:t.downTab}},[t._v("下一步")]):t._e(),t.$route.params.id||"1"!==t.currentTab?e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"submission",attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("保存")]):t._e()],1)],1),e("el-dialog",{attrs:{visible:t.modalPic,width:"950px",scrollable:"",title:"上传商品图","close-on-click-modal":!1},on:{"update:visible":function(e){t.modalPic=e}}},[t.modalPic?e("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic,getPicD:t.getPicD}}):t._e()],1),e("el-dialog",{attrs:{visible:t.addVirtualModel,width:"720px",title:"添加卡密","show-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addVirtualModel=e},closed:t.initVirtualData}},[e("div",{staticClass:"trip"}),e("div",{staticClass:"type-radio"},[e("el-form",{attrs:{"label-width":"85px"}},[e("el-form-item",{attrs:{label:"卡密类型："}},[e("el-radio-group",{attrs:{size:"large"},model:{value:t.disk_type,callback:function(e){t.disk_type=e},expression:"disk_type"}},[e("el-radio",{attrs:{label:1}},[t._v("固定卡密")]),e("el-radio",{attrs:{label:2}},[t._v("一次性卡密")])],1),1==t.disk_type?e("div",[e("div",{staticClass:"stock-disk"},[e("el-input",{attrs:{size:"large",type:"textarea",rows:4,placeholder:"填写卡密信息"},model:{value:t.disk_info,callback:function(e){t.disk_info=e},expression:"disk_info"}})],1),e("div",{staticClass:"stock-input"},[e("el-input-number",{attrs:{controls:!1,max:1e5,min:1,step:1,precision:0},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}}),e("span",{staticClass:"pl10"},[t._v("件")])],1)]):t._e(),2==t.disk_type?e("div",{staticClass:"scroll-virtual"},t._l(t.virtualList,(function(a,i){return e("div",{key:i,staticClass:"virtual-data mb10"},[e("span",{staticClass:"mr10 virtual-title"},[t._v("卡号"+t._s(i+1)+"：")]),e("el-input",{staticClass:"mr10",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入卡号(非必填)"},model:{value:a.key,callback:function(e){t.$set(a,"key","string"==typeof e?e.trim():e)},expression:"item.key"}}),e("span",{staticClass:"mr10 virtual-title"},[t._v("卡密"+t._s(i+1)+"：")]),e("el-input",{staticClass:"mr10",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入卡密"},model:{value:a.value,callback:function(e){t.$set(a,"value","string"==typeof e?e.trim():e)},expression:"item.value"}}),e("span",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"deteal-btn",on:{click:function(e){return t.removeVirtual(i)}}},[t._v("删除")])],1)})),0):t._e(),2==t.disk_type?e("div",{staticClass:"add-more"},[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],staticClass:"h-33",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")]),e("el-upload",{staticClass:"ml10",attrs:{action:t.cardUrl,data:t.uploadData,headers:t.header,"on-success":t.upFile,"before-upload":t.beforeUpload}},[e("el-button",[t._v("导入卡密")])],1)],1):t._e()],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],on:{click:t.closeVirtual}},[t._v("取 消")]),e("el-button",{directives:[{name:"db-click",rawName:"v-db-click"}],attrs:{type:"primary"},on:{click:t.upVirtual}},[t._v("确 定")])],1)])],1),e("freightTemplate",{ref:"templates",attrs:{template:t.template},on:{changeTemplate:t.changeTemplate,addSuccess:t.productGetTemplate}}),e("add-attr",{ref:"addattr",on:{getList:t.userSearchs}}),e("coupon-list",{ref:"couponTemplates",attrs:{couponids:t.formValidate.coupon_ids,updateIds:t.updateIds,updateName:t.updateName},on:{nameId:t.nameId}}),e("coupon-list",{ref:"goodsCoupon",attrs:{many:"one",luckDraw:!0},on:{getCouponId:t.goodsCouponId}}),e("el-dialog",{staticClass:"Box",attrs:{visible:t.modals,title:"复制淘宝、天猫、京东、苏宁、1688","close-on-click-modal":!1,width:"720px"},on:{"update:visible":function(e){t.modals=e},closed:t.cancel}},[t.modals?e("tao-bao",{ref:"taobaos",on:{"on-close":t.onClose}}):t._e()],1),e("el-dialog",{staticClass:"paymentFooter",attrs:{visible:t.goods_modals,title:"商品列表",footerHide:"",scrollable:"",width:"1000px"},on:{"update:visible":function(e){t.goods_modals=e}}},[t.goods_modals?e("goods-list",{ref:"goodslist",attrs:{ischeckbox:!0},on:{getProductId:t.getProductId}}):t._e()],1),e("el-dialog",{attrs:{visible:t.labelShow,title:"请选择用户标签","show-close":!0,width:"540px","close-on-click-modal":!1},on:{"update:visible":function(e){t.labelShow=e}}},[e("userLabel",{ref:"userLabel",on:{activeData:t.activeData,close:t.labelClose}})],1),e("el-dialog",{attrs:{visible:t.tagShow,title:"请选择商品标签","show-close":!0,width:"540px","close-on-click-modal":!1},on:{"update:visible":function(e){t.tagShow=e}}},[e("goodsLabel",{ref:"goodsLabel",attrs:{defaultLabelList:t.labelList},on:{activeLabel:t.activeLabel,close:t.labelClose}})],1)],1)}),[],!1,null,"1e034081",null);e.default=y.exports},e2d9:function(t,e,a){},e8cd:function(t,e,a){},eda8:function(t,e,a){a("e2d9")},fea3:function(t,e,a){},ffd6:function(t,e,a){var i=a("3729"),n=a("1310");t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==i(t)}}}]);